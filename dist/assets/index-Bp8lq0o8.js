(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();/**
* @vue/shared v3.4.30
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Dh(t,e){const n=new Set(t.split(","));return i=>n.has(i)}const Ah={},Oh=[],Oi=()=>{},Lh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Tc=Object.assign,Nh=Object.prototype.hasOwnProperty,er=(t,e)=>Nh.call(t,e),X=Array.isArray,sn=t=>$r(t)==="[object Map]",Dc=t=>$r(t)==="[object Set]",Ie=t=>typeof t=="function",je=t=>typeof t=="string",Yt=t=>typeof t=="symbol",we=t=>t!==null&&typeof t=="object",Rh=t=>(we(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),Ac=Object.prototype.toString,$r=t=>Ac.call(t),Ph=t=>$r(t).slice(8,-1),Oc=t=>$r(t)==="[object Object]",fo=t=>je(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,_t=(t,e)=>!Object.is(t,e),Mh=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},za=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let $a;const Fh=()=>$a||($a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function po(t){if(X(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=je(i)?Wh(i):po(i);if(r)for(const s in r)e[s]=r[s]}return e}else if(je(t)||we(t))return t}const Bh=/;(?![^(]*\))/g,Hh=/:([^]+)/,Vh=/\/\*[^]*?\*\//g;function Wh(t){const e={};return t.replace(Vh,"").split(Bh).forEach(n=>{if(n){const i=n.split(Hh);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function go(t){let e="";if(je(t))e=t;else if(X(t))for(let n=0;n<t.length;n++){const i=go(t[n]);i&&(e+=i+" ")}else if(we(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const jh=t=>je(t)?t:t==null?"":X(t)||we(t)&&(t.toString===Ac||!Ie(t.toString))?JSON.stringify(t,Lc,2):String(t),Lc=(t,e)=>e&&e.__v_isRef?Lc(t,e.value):sn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r],s)=>(n[ss(i,s)+" =>"]=r,n),{})}:Dc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ss(n))}:Yt(e)?ss(e):we(e)&&!X(e)&&!Oc(e)?String(e):e,ss=(t,e="")=>{var n;return Yt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.30
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zh;function $h(t,e=zh){e&&e.active&&e.effects.push(t)}let Pt;class Nc{constructor(e,n,i,r){this.fn=e,this.trigger=n,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,$h(this,r)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,qr();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed){if(n.computed.effect._dirtyLevel===2)return Xn(),!0;if(qh(n.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),Xn()}return this._dirtyLevel>=5}set dirty(e){this._dirtyLevel=e?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ct,n=Pt;try{return ct=!0,Pt=this,this._runnings++,qa(this),this.fn()}finally{Ua(this),this._runnings--,Pt=n,ct=e}}stop(){this.active&&(qa(this),Ua(this),this.onStop&&this.onStop(),this.active=!1)}}function qh(t){return t.value}function qa(t){t._trackId++,t._depsLength=0}function Ua(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Rc(t.deps[e],t);t.deps.length=t._depsLength}}function Rc(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let ct=!0,Ss=0;const Pc=[];function qr(){Pc.push(ct),ct=!1}function Xn(){const t=Pc.pop();ct=t===void 0?!0:t}function _o(){Ss++}function mo(){for(Ss--;!Ss&&xs.length;)xs.shift()()}function Mc(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&Rc(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const xs=[];function Fc(t,e,n){_o();for(const i of t.keys()){let r;if(!t.computed&&i.computed&&i._runnings>0&&(r??(r=t.get(i)===i._trackId))){i._dirtyLevel=2;continue}i._dirtyLevel<e&&(r??(r=t.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i.computed&&i._dirtyLevel===2&&(i._shouldSchedule=!0),i._dirtyLevel=e),i._shouldSchedule&&(r??(r=t.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==3&&(i._shouldSchedule=!1,i.scheduler&&xs.push(i.scheduler)))}mo()}const Bc=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Ts=new WeakMap,Mt=Symbol(""),Ds=Symbol("");function xe(t,e,n){if(ct&&Pt){let i=Ts.get(t);i||Ts.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=Bc(()=>i.delete(n))),Mc(Pt,r)}}function ut(t,e,n,i,r,s){const o=Ts.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&X(t)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!Yt(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":X(t)?fo(n)&&a.push(o.get("length")):(a.push(o.get(Mt)),sn(t)&&a.push(o.get(Ds)));break;case"delete":X(t)||(a.push(o.get(Mt)),sn(t)&&a.push(o.get(Ds)));break;case"set":sn(t)&&a.push(o.get(Mt));break}_o();for(const l of a)l&&Fc(l,5);mo()}const Uh=Dh("__proto__,__v_isRef,__isVue"),Hc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Yt)),Ya=Yh();function Yh(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=V(this);for(let s=0,o=this.length;s<o;s++)xe(i,"get",s+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(V)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){qr(),_o();const i=V(this)[e].apply(this,n);return mo(),Xn(),i}}),t}function Kh(t){Yt(t)||(t=String(t));const e=V(this);return xe(e,"has",t),e.hasOwnProperty(t)}class Vc{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return i===(r?s?lf:zc:s?af:jc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=X(e);if(!r){if(o&&er(Ya,n))return Reflect.get(Ya,n,i);if(n==="hasOwnProperty")return Kh}const a=Reflect.get(e,n,i);return(Yt(n)?Hc.has(n):Uh(n))||(r||xe(e,"get",n),s)?a:Qe(a)?o&&fo(n)?a:a.value:we(a)?r?qc(a):$c(a):a}}class Gh extends Vc{constructor(e=!1){super(!1,e)}set(e,n,i,r){let s=e[n];if(!this._isShallow){const l=Jn(s);if(!tr(i)&&!Jn(i)&&(s=V(s),i=V(i)),!X(e)&&Qe(s)&&!Qe(i))return l?!1:(s.value=i,!0)}const o=X(e)&&fo(n)?Number(n)<e.length:er(e,n),a=Reflect.set(e,n,i,r);return e===V(r)&&(o?_t(i,s)&&ut(e,"set",n,i):ut(e,"add",n,i)),a}deleteProperty(e,n){const i=er(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&i&&ut(e,"delete",n,void 0),r}has(e,n){const i=Reflect.has(e,n);return(!Yt(n)||!Hc.has(n))&&xe(e,"has",n),i}ownKeys(e){return xe(e,"iterate",X(e)?"length":Mt),Reflect.ownKeys(e)}}class Qh extends Vc{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Xh=new Gh,Jh=new Qh,vo=t=>t,Ur=t=>Reflect.getPrototypeOf(t);function Li(t,e,n=!1,i=!1){t=t.__v_raw;const r=V(t),s=V(e);n||(_t(e,s)&&xe(r,"get",e),xe(r,"get",s));const{has:o}=Ur(r),a=i?vo:n?yo:Zn;if(o.call(r,e))return a(t.get(e));if(o.call(r,s))return a(t.get(s));t!==r&&t.get(e)}function Ni(t,e=!1){const n=this.__v_raw,i=V(n),r=V(t);return e||(_t(t,r)&&xe(i,"has",t),xe(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function Ri(t,e=!1){return t=t.__v_raw,!e&&xe(V(t),"iterate",Mt),Reflect.get(t,"size",t)}function Ka(t){t=V(t);const e=V(this);return Ur(e).has.call(e,t)||(e.add(t),ut(e,"add",t,t)),this}function Ga(t,e){e=V(e);const n=V(this),{has:i,get:r}=Ur(n);let s=i.call(n,t);s||(t=V(t),s=i.call(n,t));const o=r.call(n,t);return n.set(t,e),s?_t(e,o)&&ut(n,"set",t,e):ut(n,"add",t,e),this}function Qa(t){const e=V(this),{has:n,get:i}=Ur(e);let r=n.call(e,t);r||(t=V(t),r=n.call(e,t)),i&&i.call(e,t);const s=e.delete(t);return r&&ut(e,"delete",t,void 0),s}function Xa(){const t=V(this),e=t.size!==0,n=t.clear();return e&&ut(t,"clear",void 0,void 0),n}function Pi(t,e){return function(i,r){const s=this,o=s.__v_raw,a=V(o),l=e?vo:t?yo:Zn;return!t&&xe(a,"iterate",Mt),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function Mi(t,e,n){return function(...i){const r=this.__v_raw,s=V(r),o=sn(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...i),u=n?vo:e?yo:Zn;return!e&&xe(s,"iterate",l?Ds:Mt),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function tt(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Zh(){const t={get(s){return Li(this,s)},get size(){return Ri(this)},has:Ni,add:Ka,set:Ga,delete:Qa,clear:Xa,forEach:Pi(!1,!1)},e={get(s){return Li(this,s,!1,!0)},get size(){return Ri(this)},has:Ni,add:Ka,set:Ga,delete:Qa,clear:Xa,forEach:Pi(!1,!0)},n={get(s){return Li(this,s,!0)},get size(){return Ri(this,!0)},has(s){return Ni.call(this,s,!0)},add:tt("add"),set:tt("set"),delete:tt("delete"),clear:tt("clear"),forEach:Pi(!0,!1)},i={get(s){return Li(this,s,!0,!0)},get size(){return Ri(this,!0)},has(s){return Ni.call(this,s,!0)},add:tt("add"),set:tt("set"),delete:tt("delete"),clear:tt("clear"),forEach:Pi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Mi(s,!1,!1),n[s]=Mi(s,!0,!1),e[s]=Mi(s,!1,!0),i[s]=Mi(s,!0,!0)}),[t,n,e,i]}const[ef,tf,nf,rf]=Zh();function Wc(t,e){const n=e?t?rf:nf:t?tf:ef;return(i,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get(er(n,r)&&r in i?n:i,r,s)}const sf={get:Wc(!1,!1)},of={get:Wc(!0,!1)},jc=new WeakMap,af=new WeakMap,zc=new WeakMap,lf=new WeakMap;function cf(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uf(t){return t.__v_skip||!Object.isExtensible(t)?0:cf(Ph(t))}function $c(t){return Jn(t)?t:Uc(t,!1,Xh,sf,jc)}function qc(t){return Uc(t,!0,Jh,of,zc)}function Uc(t,e,n,i,r){if(!we(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=r.get(t);if(s)return s;const o=uf(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return r.set(t,a),a}function Ui(t){return Jn(t)?Ui(t.__v_raw):!!(t&&t.__v_isReactive)}function Jn(t){return!!(t&&t.__v_isReadonly)}function tr(t){return!!(t&&t.__v_isShallow)}function Yc(t){return t?!!t.__v_raw:!1}function V(t){const e=t&&t.__v_raw;return e?V(e):t}const Zn=t=>we(t)?$c(t):t,yo=t=>we(t)?qc(t):t;class df{constructor(e,n,i,r){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Nc(()=>e(this._value),()=>Yi(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=V(this),n=e.effect._dirtyLevel;return(!e._cacheable||e.effect.dirty)&&_t(e._value,e._value=e.effect.run())&&n!==3&&Yi(e,5),Kc(e),e.effect._dirtyLevel>=2&&Yi(e,3),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Kc(t){var e;ct&&Pt&&(t=V(t),Mc(Pt,(e=t.dep)!=null?e:t.dep=Bc(()=>t.dep=void 0,t instanceof df?t:void 0)))}function Yi(t,e=5,n,i){t=V(t);const r=t.dep;r&&Fc(r,e)}function Qe(t){return!!(t&&t.__v_isRef===!0)}function As(t){return hf(t,!1)}function hf(t,e){return Qe(t)?t:new ff(t,e)}class ff{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:V(e),this._value=n?e:Zn(e)}get value(){return Kc(this),this._value}set value(e){const n=this.__v_isShallow||tr(e)||Jn(e);e=n?e:V(e),_t(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:Zn(e),Yi(this,5))}}function pf(t){return Qe(t)?t.value:t}/**
* @vue/runtime-core v3.4.30
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function on(t,e,n,i){try{return i?t(...i):t()}catch(r){Gc(r,e,n)}}function Vn(t,e,n,i){if(Ie(t)){const r=on(t,e,n,i);return r&&Rh(r)&&r.catch(s=>{Gc(s,e,n)}),r}if(X(t)){const r=[];for(let s=0;s<t.length;s++)r.push(Vn(t[s],e,n,i));return r}}function Gc(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){qr(),on(l,null,10,[t,o,a]),Xn();return}}gf(t,n,r,i)}function gf(t,e,n,i=!0){console.error(t)}let nr=!1,Os=!1;const Ne=[];let at=0;const an=[];let nt=null,Dt=0;const _f=Promise.resolve();function mf(t){let e=at+1,n=Ne.length;for(;e<n;){const i=e+n>>>1,r=Ne[i],s=ei(r);s<t||s===t&&r.pre?e=i+1:n=i}return e}function vf(t){(!Ne.length||!Ne.includes(t,nr&&t.allowRecurse?at+1:at))&&(t.id==null?Ne.push(t):Ne.splice(mf(t.id),0,t),Qc())}function Qc(){!nr&&!Os&&(Os=!0,_f.then(Xc))}function yf(t){X(t)?an.push(...t):(!nt||!nt.includes(t,t.allowRecurse?Dt+1:Dt))&&an.push(t),Qc()}function wf(t){if(an.length){const e=[...new Set(an)].sort((n,i)=>ei(n)-ei(i));if(an.length=0,nt){nt.push(...e);return}for(nt=e,Dt=0;Dt<nt.length;Dt++){const n=nt[Dt];n.active!==!1&&n()}nt=null,Dt=0}}const ei=t=>t.id==null?1/0:t.id,bf=(t,e)=>{const n=ei(t)-ei(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Xc(t){Os=!1,nr=!0,Ne.sort(bf);try{for(at=0;at<Ne.length;at++){const e=Ne[at];e&&e.active!==!1&&on(e,null,14)}}finally{at=0,Ne.length=0,wf(),nr=!1,(Ne.length||an.length)&&Xc()}}let Nt=null,Ef=null;const Cf=Symbol.for("v-ndc"),kf=t=>t.__isSuspense;function If(t,e){e&&e.pendingBranch?X(t)?e.effects.push(...t):e.effects.push(t):yf(t)}function Sf(t,e,n=In,i=!1){if(n){const r=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{qr();const a=Yf(n),l=Vn(e,n,t,o);return a(),Xn(),l});return i?r.unshift(s):r.push(s),s}}const xf=t=>(e,n=In)=>{(!bo||t==="sp")&&Sf(t,(...i)=>e(...i),n)},Jc=xf("m");function Tf(t,e){return t}function Df(t,e,n,i){let r;const s=n;if(X(t)||je(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,s)}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,s)}else if(we(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,s));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(t[c],c,a,s)}}else r=[];return r}let Ja=null;function Af(t,e,n=!1){const i=In||Nt;if(i||Ja){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Ja._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ie(e)?e.call(i&&i.proxy):e}}const Of={},Zc=t=>Object.getPrototypeOf(t)===Of,Za=If,Lf=Symbol.for("v-scx"),Nf=()=>Af(Lf);function Rf(t,e){return eu(t,null,e)}const Fi={};function Pf(t,e,n){return eu(t,e,n)}function eu(t,e,{immediate:n,deep:i,flush:r,once:s,onTrack:o,onTrigger:a}=Ah){if(e&&s){const w=e;e=(...E)=>{w(...E),b()}}const l=In,c=w=>i===!0?w:At(w,i===!1?1:void 0);let u,d=!1,h=!1;if(Qe(t)?(u=()=>t.value,d=tr(t)):Ui(t)?(u=()=>c(t),d=!0):X(t)?(h=!0,d=t.some(w=>Ui(w)||tr(w)),u=()=>t.map(w=>{if(Qe(w))return w.value;if(Ui(w))return c(w);if(Ie(w))return on(w,l,2)})):Ie(t)?e?u=()=>on(t,l,2):u=()=>(f&&f(),Vn(t,l,3,[p])):u=Oi,e&&i){const w=u;u=()=>At(w())}let f,p=w=>{f=T.onStop=()=>{on(w,l,4),f=T.onStop=void 0}},g;if(bo)if(p=Oi,e?n&&Vn(e,l,3,[u(),h?[]:void 0,p]):u(),r==="sync"){const w=Nf();g=w.__watcherHandles||(w.__watcherHandles=[])}else return Oi;let _=h?new Array(t.length).fill(Fi):Fi;const C=()=>{if(!(!T.active||!T.dirty))if(e){const w=T.run();(i||d||(h?w.some((E,L)=>_t(E,_[L])):_t(w,_)))&&(f&&f(),Vn(e,l,3,[w,_===Fi?void 0:h&&_[0]===Fi?[]:_,p]),_=w)}else T.run()};C.allowRecurse=!!e;let O;r==="sync"?O=C:r==="post"?O=()=>Za(C,l&&l.suspense):(C.pre=!0,l&&(C.id=l.uid),O=()=>vf(C));const T=new Nc(u,Oi,O),b=()=>{T.stop()};return e?n?C():_=T.run():r==="post"?Za(T.run.bind(T),l&&l.suspense):T.run(),g&&g.push(b),b}function At(t,e=1/0,n){if(e<=0||!we(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Qe(t))At(t.value,e,n);else if(X(t))for(let i=0;i<t.length;i++)At(t[i],e,n);else if(Dc(t)||sn(t))t.forEach(i=>{At(i,e,n)});else if(Oc(t)){for(const i in t)At(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&At(t[i],e,n)}return t}function tu(t,e){t.shapeFlag&6&&t.component?tu(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}const Mf=t=>t.__isTeleport,Yr=Symbol.for("v-fgt"),Ff=Symbol.for("v-txt"),Ls=Symbol.for("v-cmt"),Bf=Symbol.for("v-stc"),Ki=[];let Pe=null;function Ue(t=!1){Ki.push(Pe=t?null:[])}function Hf(){Ki.pop(),Pe=Ki[Ki.length-1]||null}function nu(t){return t.dynamicChildren=Pe||Oh,Hf(),Pe&&Pe.push(t),t}function lt(t,e,n,i,r,s){return nu(J(t,e,n,i,r,s,!0))}function Vf(t,e,n,i,r){return nu(Bt(t,e,n,i,r,!0))}function Wf(t){return t?t.__v_isVNode===!0:!1}const iu=({key:t})=>t??null,Gi=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?je(t)||Qe(t)||Ie(t)?{i:Nt,r:t,k:e,f:!!n}:t:null);function J(t,e=null,n=null,i=0,r=null,s=t===Yr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&iu(e),ref:e&&Gi(e),scopeId:Ef,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Nt};return a?(wo(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=je(n)?8:16),!o&&Pe&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Pe.push(l),l}const Bt=jf;function jf(t,e=null,n=null,i=0,r=null,s=!1){if((!t||t===Cf)&&(t=Ls),Wf(t)){const a=Ns(t,e,!0);return n&&wo(a,n),!s&&Pe&&(a.shapeFlag&6?Pe[Pe.indexOf(t)]=a:Pe.push(a)),a.patchFlag=-2,a}if(Kf(t)&&(t=t.__vccOpts),e){e=zf(e);let{class:a,style:l}=e;a&&!je(a)&&(e.class=go(a)),we(l)&&(Yc(l)&&!X(l)&&(l=Tc({},l)),e.style=po(l))}const o=je(t)?1:kf(t)?128:Mf(t)?64:we(t)?4:Ie(t)?2:0;return J(t,e,n,i,r,o,s,!0)}function zf(t){return t?Yc(t)||Zc(t)?Tc({},t):t:null}function Ns(t,e,n=!1,i=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?Uf(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&iu(c),ref:e&&e.ref?n&&s?X(s)?s.concat(Gi(e)):[s,Gi(e)]:Gi(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Yr?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ns(t.ssContent),ssFallback:t.ssFallback&&Ns(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&tu(u,l.clone(u)),u}function $f(t=" ",e=0){return Bt(Ff,null,t,e)}function ru(t,e){const n=Bt(Bf,null,t);return n.staticCount=e,n}function qf(t="",e=!1){return e?(Ue(),Vf(Ls,null,t)):Bt(Ls,null,t)}function wo(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(X(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),wo(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Zc(e)?e._ctx=Nt:r===3&&Nt&&(Nt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:Nt},n=32):(e=String(e),i&64?(n=16,e=[$f(e)]):n=8);t.children=e,t.shapeFlag|=n}function Uf(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=go([e.class,i.class]));else if(r==="style")e.style=po([e.style,i.style]);else if(Lh(r)){const s=e[r],o=i[r];o&&s!==o&&!(X(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}let In=null,Rs;{const t=Fh(),e=(n,i)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};Rs=e("__VUE_INSTANCE_SETTERS__",n=>In=n),e("__VUE_SSR_SETTERS__",n=>bo=n)}const Yf=t=>{const e=In;return Rs(t),t.scope.on(),()=>{t.scope.off(),Rs(e)}};let bo=!1;function Kf(t){return Ie(t)&&"__vccOpts"in t}/**
* @vue/runtime-dom v3.4.30
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function On(t,e,n,i){t.addEventListener(e,n,i)}const el=t=>{const e=t.props["onUpdate:modelValue"]||!1;return X(e)?n=>Mh(e,n):e};function Gf(t){t.target.composing=!0}function tl(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const os=Symbol("_assign"),Qf={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t[os]=el(r);const s=i||r.props&&r.props.type==="number";On(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=za(a)),t[os](a)}),n&&On(t,"change",()=>{t.value=t.value.trim()}),e||(On(t,"compositionstart",Gf),On(t,"compositionend",tl),On(t,"change",tl))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:r,number:s}},o){if(t[os]=el(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?za(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||r&&t.value.trim()===l)||(t.value=l))}},su=new Set,pe=new WeakMap,pn=new WeakMap,Ht=new WeakMap,Ps=new WeakMap,Xf=new WeakMap,gn=new WeakMap,ir=new WeakMap,Hn=new WeakSet;let mt,Eo=0,Co=0;const Ye="__aa_tgt",ti="__aa_del",rr="__aa_new",Jf=t=>{const e=rp(t);e&&e.forEach(n=>sp(n))},Zf=t=>{t.forEach(e=>{e.target===mt&&tp(),pe.has(e.target)&&Kt(e.target)})};function ep(t){const e=Ps.get(t);e==null||e.disconnect();let n=pe.get(t),i=0;const r=5;n||(n=_n(t),pe.set(t,n));const{offsetWidth:s,offsetHeight:o}=mt,l=[n.top-r,s-(n.left+r+n.width),o-(n.top+r+n.height),n.left-r].map(u=>`${-1*Math.floor(u)}px`).join(" "),c=new IntersectionObserver(()=>{++i>1&&Kt(t)},{root:mt,threshold:1,rootMargin:l});c.observe(t),Ps.set(t,c)}function Kt(t){clearTimeout(ir.get(t));const e=Kr(t),n=ni(e)?500:e.duration;ir.set(t,setTimeout(async()=>{const i=Ht.get(t);try{await(i==null?void 0:i.finished),pe.set(t,_n(t)),ep(t)}catch{}},n))}function tp(){clearTimeout(ir.get(mt)),ir.set(mt,setTimeout(()=>{su.forEach(t=>cu(t,e=>ou(()=>Kt(e))))},100))}function np(t){setTimeout(()=>{Xf.set(t,setInterval(()=>ou(Kt.bind(null,t)),2e3))},Math.round(2e3*Math.random()))}function ou(t){typeof requestIdleCallback=="function"?requestIdleCallback(()=>t()):requestAnimationFrame(()=>t())}let Ms,tn;const ip=typeof window<"u"&&"ResizeObserver"in window;ip&&(mt=document.documentElement,Ms=new MutationObserver(Jf),tn=new ResizeObserver(Zf),window.addEventListener("scroll",()=>{Co=window.scrollY,Eo=window.scrollX}),tn.observe(mt));function rp(t){return t.reduce((i,r)=>[...i,...Array.from(r.addedNodes),...Array.from(r.removedNodes)],[]).every(i=>i.nodeName==="#comment")?!1:t.reduce((i,r)=>{if(i===!1)return!1;if(r.target instanceof Element){if(as(r.target),!i.has(r.target)){i.add(r.target);for(let s=0;s<r.target.children.length;s++){const o=r.target.children.item(s);if(o){if(ti in o)return!1;as(r.target,o),i.add(o)}}}if(r.removedNodes.length)for(let s=0;s<r.removedNodes.length;s++){const o=r.removedNodes[s];if(ti in o)return!1;o instanceof Element&&(i.add(o),as(r.target,o),pn.set(o,[r.previousSibling,r.nextSibling]))}}return i},new Set)}function as(t,e){!e&&!(Ye in t)?Object.defineProperty(t,Ye,{value:t}):e&&!(Ye in e)&&Object.defineProperty(e,Ye,{value:t})}function sp(t){var e;const n=t.isConnected,i=pe.has(t);n&&pn.has(t)&&pn.delete(t),Ht.has(t)&&((e=Ht.get(t))===null||e===void 0||e.cancel()),rr in t?nl(t):i&&n?ap(t):i&&!n?lp(t):nl(t)}function Ve(t){return Number(t.replace(/[^0-9.\-]/g,""))}function op(t){let e=t.parentElement;for(;e;){if(e.scrollLeft||e.scrollTop)return{x:e.scrollLeft,y:e.scrollTop};e=e.parentElement}return{x:0,y:0}}function _n(t){const e=t.getBoundingClientRect(),{x:n,y:i}=op(t);return{top:e.top+i,left:e.left+n,width:e.width,height:e.height}}function au(t,e,n){let i=e.width,r=e.height,s=n.width,o=n.height;const a=getComputedStyle(t);if(a.getPropertyValue("box-sizing")==="content-box"){const c=Ve(a.paddingTop)+Ve(a.paddingBottom)+Ve(a.borderTopWidth)+Ve(a.borderBottomWidth),u=Ve(a.paddingLeft)+Ve(a.paddingRight)+Ve(a.borderRightWidth)+Ve(a.borderLeftWidth);i-=u,s-=u,r-=c,o-=c}return[i,s,r,o].map(Math.round)}function Kr(t){return Ye in t&&gn.has(t[Ye])?gn.get(t[Ye]):{duration:250,easing:"ease-in-out"}}function lu(t){if(Ye in t)return t[Ye]}function ko(t){const e=lu(t);return e?Hn.has(e):!1}function cu(t,...e){e.forEach(n=>n(t,gn.has(t)));for(let n=0;n<t.children.length;n++){const i=t.children.item(n);i&&e.forEach(r=>r(i,gn.has(i)))}}function Io(t){return Array.isArray(t)?t:[t]}function ni(t){return typeof t=="function"}function ap(t){const e=pe.get(t),n=_n(t);if(!ko(t))return pe.set(t,n);let i;if(!e)return;const r=Kr(t);if(typeof r!="function"){const s=e.left-n.left,o=e.top-n.top,[a,l,c,u]=au(t,e,n),d={transform:`translate(${s}px, ${o}px)`},h={transform:"translate(0, 0)"};a!==l&&(d.width=`${a}px`,h.width=`${l}px`),c!==u&&(d.height=`${c}px`,h.height=`${u}px`),i=t.animate([d,h],{duration:r.duration,easing:r.easing})}else{const[s]=Io(r(t,"remain",e,n));i=new Animation(s),i.play()}Ht.set(t,i),pe.set(t,n),i.addEventListener("finish",Kt.bind(null,t))}function nl(t){rr in t&&delete t[rr];const e=_n(t);pe.set(t,e);const n=Kr(t);if(!ko(t))return;let i;if(typeof n!="function")i=t.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n.duration*1.5,easing:"ease-in"});else{const[r]=Io(n(t,"add",e));i=new Animation(r),i.play()}Ht.set(t,i),i.addEventListener("finish",Kt.bind(null,t))}function il(t,e){var n;t.remove(),pe.delete(t),pn.delete(t),Ht.delete(t),(n=Ps.get(t))===null||n===void 0||n.disconnect(),setTimeout(()=>{if(ti in t&&delete t[ti],Object.defineProperty(t,rr,{value:!0,configurable:!0}),e&&t instanceof HTMLElement)for(const i in e)t.style[i]=""},0)}function lp(t){var e;if(!pn.has(t)||!pe.has(t))return;const[n,i]=pn.get(t);Object.defineProperty(t,ti,{value:!0,configurable:!0});const r=window.scrollX,s=window.scrollY;if(i&&i.parentNode&&i.parentNode instanceof Element?i.parentNode.insertBefore(t,i):n&&n.parentNode?n.parentNode.appendChild(t):(e=lu(t))===null||e===void 0||e.appendChild(t),!ko(t))return il(t);const[o,a,l,c]=up(t),u=Kr(t),d=pe.get(t);(r!==Eo||s!==Co)&&cp(t,r,s,u);let h,f={position:"absolute",top:`${o}px`,left:`${a}px`,width:`${l}px`,height:`${c}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!ni(u))Object.assign(t.style,f),h=t.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:u.duration,easing:"ease-out"});else{const[p,g]=Io(u(t,"remove",d));(g==null?void 0:g.styleReset)!==!1&&(f=(g==null?void 0:g.styleReset)||f,Object.assign(t.style,f)),h=new Animation(p),h.play()}Ht.set(t,h),h.addEventListener("finish",il.bind(null,t,f))}function cp(t,e,n,i){const r=Eo-e,s=Co-n,o=document.documentElement.style.scrollBehavior;if(getComputedStyle(mt).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+r,window.scrollY+s),!t.parentElement)return;const l=t.parentElement;let c=l.clientHeight,u=l.clientWidth;const d=performance.now();function h(){requestAnimationFrame(()=>{if(!ni(i)){const f=c-l.clientHeight,p=u-l.clientWidth;d+i.duration>performance.now()?(window.scrollTo({left:window.scrollX-p,top:window.scrollY-f}),c=l.clientHeight,u=l.clientWidth,h()):document.documentElement.style.scrollBehavior=o}})}h()}function up(t){const e=pe.get(t),[n,,i]=au(t,e,_n(t));let r=t.parentElement;for(;r&&(getComputedStyle(r).position==="static"||r instanceof HTMLBodyElement);)r=r.parentElement;r||(r=document.body);const s=getComputedStyle(r),o=pe.get(r)||_n(r),a=Math.round(e.top-o.top)-Ve(s.borderTopWidth),l=Math.round(e.left-o.left)-Ve(s.borderLeftWidth);return[a,l,n,i]}function dp(t,e={}){return Ms&&tn&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!ni(e)&&!e.disrespectUserMotionPreference||(Hn.add(t),getComputedStyle(t).position==="static"&&Object.assign(t.style,{position:"relative"}),cu(t,Kt,np,r=>tn==null?void 0:tn.observe(r)),ni(e)?gn.set(t,e):gn.set(t,{duration:250,easing:"ease-in-out",...e}),Ms.observe(t,{childList:!0}),su.add(t))),Object.freeze({parent:t,enable:()=>{Hn.add(t)},disable:()=>{Hn.delete(t)},isEnabled:()=>Hn.has(t)})}const hp={mounted:(t,e)=>{dp(t,e.value||{})},getSSRProps:()=>({})},fp=hp,pp={install(t){t.directive("auto-animate",fp)}};var gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uu={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(gp,function(){return function(n){function i(s){if(r[s])return r[s].exports;var o=r[s]={exports:{},id:s,loaded:!1};return n[s].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}var r={};return i.m=n,i.c=r,i.p="dist/",i(0)}([function(n,i,r){function s(k){return k&&k.__esModule?k:{default:k}}var o=Object.assign||function(k){for(var R=1;R<arguments.length;R++){var W=arguments[R];for(var K in W)Object.prototype.hasOwnProperty.call(W,K)&&(k[K]=W[K])}return k},a=r(1),l=(s(a),r(6)),c=s(l),u=r(7),d=s(u),h=r(8),f=s(h),p=r(9),g=s(p),_=r(10),C=s(_),O=r(11),T=s(O),b=r(14),w=s(b),E=[],L=!1,I={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},D=function(){var k=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(k&&(L=!0),L)return E=(0,T.default)(E,I),(0,C.default)(E,I.once),E},A=function(){E=(0,w.default)(),D()},y=function(){E.forEach(function(k,R){k.node.removeAttribute("data-aos"),k.node.removeAttribute("data-aos-easing"),k.node.removeAttribute("data-aos-duration"),k.node.removeAttribute("data-aos-delay")})},v=function(k){return k===!0||k==="mobile"&&g.default.mobile()||k==="phone"&&g.default.phone()||k==="tablet"&&g.default.tablet()||typeof k=="function"&&k()===!0},S=function(k){I=o(I,k),E=(0,w.default)();var R=document.all&&!window.atob;return v(I.disable)||R?y():(I.disableMutationObserver||f.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),I.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",I.easing),document.querySelector("body").setAttribute("data-aos-duration",I.duration),document.querySelector("body").setAttribute("data-aos-delay",I.delay),I.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?D(!0):I.startEvent==="load"?window.addEventListener(I.startEvent,function(){D(!0)}):document.addEventListener(I.startEvent,function(){D(!0)}),window.addEventListener("resize",(0,d.default)(D,I.debounceDelay,!0)),window.addEventListener("orientationchange",(0,d.default)(D,I.debounceDelay,!0)),window.addEventListener("scroll",(0,c.default)(function(){(0,C.default)(E,I.once)},I.throttleDelay)),I.disableMutationObserver||f.default.ready("[data-aos]",A),E)};n.exports={init:S,refresh:D,refreshHard:A}},function(n,i){},,,,,function(n,i){(function(r){function s(v,S,k){function R(H){var ae=Z,Le=ee;return Z=ee=void 0,He=H,Q=v.apply(Le,ae)}function W(H){return He=H,j=setTimeout(ue,S),Ce?R(H):Q}function K(H){var ae=H-se,Le=H-He,An=S-ae;return Oe?A(An,oe-Le):An}function Ee(H){var ae=H-se,Le=H-He;return se===void 0||ae>=S||ae<0||Oe&&Le>=oe}function ue(){var H=y();return Ee(H)?qe(H):void(j=setTimeout(ue,K(H)))}function qe(H){return j=void 0,$&&Z?R(H):(Z=ee=void 0,Q)}function kt(){j!==void 0&&clearTimeout(j),He=0,Z=se=ee=j=void 0}function Ae(){return j===void 0?Q:qe(y())}function de(){var H=y(),ae=Ee(H);if(Z=arguments,ee=this,se=H,ae){if(j===void 0)return W(se);if(Oe)return j=setTimeout(ue,S),R(se)}return j===void 0&&(j=setTimeout(ue,S)),Q}var Z,ee,oe,Q,j,se,He=0,Ce=!1,Oe=!1,$=!0;if(typeof v!="function")throw new TypeError(h);return S=u(S)||0,a(k)&&(Ce=!!k.leading,Oe="maxWait"in k,oe=Oe?D(u(k.maxWait)||0,S):oe,$="trailing"in k?!!k.trailing:$),de.cancel=kt,de.flush=Ae,de}function o(v,S,k){var R=!0,W=!0;if(typeof v!="function")throw new TypeError(h);return a(k)&&(R="leading"in k?!!k.leading:R,W="trailing"in k?!!k.trailing:W),s(v,S,{leading:R,maxWait:S,trailing:W})}function a(v){var S=typeof v>"u"?"undefined":d(v);return!!v&&(S=="object"||S=="function")}function l(v){return!!v&&(typeof v>"u"?"undefined":d(v))=="object"}function c(v){return(typeof v>"u"?"undefined":d(v))=="symbol"||l(v)&&I.call(v)==p}function u(v){if(typeof v=="number")return v;if(c(v))return f;if(a(v)){var S=typeof v.valueOf=="function"?v.valueOf():v;v=a(S)?S+"":S}if(typeof v!="string")return v===0?v:+v;v=v.replace(g,"");var k=C.test(v);return k||O.test(v)?T(v.slice(2),k?2:8):_.test(v)?f:+v}var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},h="Expected a function",f=NaN,p="[object Symbol]",g=/^\s+|\s+$/g,_=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,O=/^0o[0-7]+$/i,T=parseInt,b=(typeof r>"u"?"undefined":d(r))=="object"&&r&&r.Object===Object&&r,w=(typeof self>"u"?"undefined":d(self))=="object"&&self&&self.Object===Object&&self,E=b||w||Function("return this")(),L=Object.prototype,I=L.toString,D=Math.max,A=Math.min,y=function(){return E.Date.now()};n.exports=o}).call(i,function(){return this}())},function(n,i){(function(r){function s(y,v,S){function k($){var H=de,ae=Z;return de=Z=void 0,se=$,oe=y.apply(ae,H)}function R($){return se=$,Q=setTimeout(Ee,v),He?k($):oe}function W($){var H=$-j,ae=$-se,Le=v-H;return Ce?D(Le,ee-ae):Le}function K($){var H=$-j,ae=$-se;return j===void 0||H>=v||H<0||Ce&&ae>=ee}function Ee(){var $=A();return K($)?ue($):void(Q=setTimeout(Ee,W($)))}function ue($){return Q=void 0,Oe&&de?k($):(de=Z=void 0,oe)}function qe(){Q!==void 0&&clearTimeout(Q),se=0,de=j=Z=Q=void 0}function kt(){return Q===void 0?oe:ue(A())}function Ae(){var $=A(),H=K($);if(de=arguments,Z=this,j=$,H){if(Q===void 0)return R(j);if(Ce)return Q=setTimeout(Ee,v),k(j)}return Q===void 0&&(Q=setTimeout(Ee,v)),oe}var de,Z,ee,oe,Q,j,se=0,He=!1,Ce=!1,Oe=!0;if(typeof y!="function")throw new TypeError(d);return v=c(v)||0,o(S)&&(He=!!S.leading,Ce="maxWait"in S,ee=Ce?I(c(S.maxWait)||0,v):ee,Oe="trailing"in S?!!S.trailing:Oe),Ae.cancel=qe,Ae.flush=kt,Ae}function o(y){var v=typeof y>"u"?"undefined":u(y);return!!y&&(v=="object"||v=="function")}function a(y){return!!y&&(typeof y>"u"?"undefined":u(y))=="object"}function l(y){return(typeof y>"u"?"undefined":u(y))=="symbol"||a(y)&&L.call(y)==f}function c(y){if(typeof y=="number")return y;if(l(y))return h;if(o(y)){var v=typeof y.valueOf=="function"?y.valueOf():y;y=o(v)?v+"":v}if(typeof y!="string")return y===0?y:+y;y=y.replace(p,"");var S=_.test(y);return S||C.test(y)?O(y.slice(2),S?2:8):g.test(y)?h:+y}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},d="Expected a function",h=NaN,f="[object Symbol]",p=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,C=/^0o[0-7]+$/i,O=parseInt,T=(typeof r>"u"?"undefined":u(r))=="object"&&r&&r.Object===Object&&r,b=(typeof self>"u"?"undefined":u(self))=="object"&&self&&self.Object===Object&&self,w=T||b||Function("return this")(),E=Object.prototype,L=E.toString,I=Math.max,D=Math.min,A=function(){return w.Date.now()};n.exports=s}).call(i,function(){return this}())},function(n,i){function r(u){var d=void 0,h=void 0;for(d=0;d<u.length;d+=1)if(h=u[d],h.dataset&&h.dataset.aos||h.children&&r(h.children))return!0;return!1}function s(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function o(){return!!s()}function a(u,d){var h=window.document,f=s(),p=new f(l);c=d,p.observe(h.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function l(u){u&&u.forEach(function(d){var h=Array.prototype.slice.call(d.addedNodes),f=Array.prototype.slice.call(d.removedNodes),p=h.concat(f);if(r(p))return c()})}Object.defineProperty(i,"__esModule",{value:!0});var c=function(){};i.default={isSupported:o,ready:a}},function(n,i){function r(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function s(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function h(f,p){for(var g=0;g<p.length;g++){var _=p[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}return function(f,p,g){return p&&h(f.prototype,p),g&&h(f,g),f}}(),a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,u=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,d=function(){function h(){r(this,h)}return o(h,[{key:"phone",value:function(){var f=s();return!(!a.test(f)&&!l.test(f.substr(0,4)))}},{key:"mobile",value:function(){var f=s();return!(!c.test(f)&&!u.test(f.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),h}();i.default=new d},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(o,a,l){var c=o.node.getAttribute("data-aos-once");a>o.position?o.node.classList.add("aos-animate"):typeof c<"u"&&(c==="false"||!l&&c!=="true")&&o.node.classList.remove("aos-animate")},s=function(o,a){var l=window.pageYOffset,c=window.innerHeight;o.forEach(function(u,d){r(u,c+l,a)})};i.default=s},function(n,i,r){function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(i,"__esModule",{value:!0});var o=r(12),a=s(o),l=function(c,u){return c.forEach(function(d,h){d.node.classList.add("aos-init"),d.position=(0,a.default)(d.node,u.offset)}),c};i.default=l},function(n,i,r){function s(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(i,"__esModule",{value:!0});var o=r(13),a=s(o),l=function(c,u){var d=0,h=0,f=window.innerHeight,p={offset:c.getAttribute("data-aos-offset"),anchor:c.getAttribute("data-aos-anchor"),anchorPlacement:c.getAttribute("data-aos-anchor-placement")};switch(p.offset&&!isNaN(p.offset)&&(h=parseInt(p.offset)),p.anchor&&document.querySelectorAll(p.anchor)&&(c=document.querySelectorAll(p.anchor)[0]),d=(0,a.default)(c).top,p.anchorPlacement){case"top-bottom":break;case"center-bottom":d+=c.offsetHeight/2;break;case"bottom-bottom":d+=c.offsetHeight;break;case"top-center":d+=f/2;break;case"bottom-center":d+=f/2+c.offsetHeight;break;case"center-center":d+=f/2+c.offsetHeight/2;break;case"top-top":d+=f;break;case"bottom-top":d+=c.offsetHeight+f;break;case"center-top":d+=c.offsetHeight/2+f}return p.anchorPlacement||p.offset||isNaN(u)||(h=u),d+h};i.default=l},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(s){for(var o=0,a=0;s&&!isNaN(s.offsetLeft)&&!isNaN(s.offsetTop);)o+=s.offsetLeft-(s.tagName!="BODY"?s.scrollLeft:0),a+=s.offsetTop-(s.tagName!="BODY"?s.scrollTop:0),s=s.offsetParent;return{top:a,left:o}};i.default=r},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(s){return s=s||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(s,function(o){return{node:o}})};i.default=r}])})})(uu);var mp=uu.exports;const vp=_p(mp),yp="/legal_glossary/assets/Lawity_logo-Cq0f2Jg-.png",wp={class:"container mx-auto px-4"},bp=["src"],Ep=J("div",{class:"w-1/2 mx-auto lg:p-4 p-2 max-w-lg"},[J("h1",{class:"lg:text-3xl text-lg text-center font-lxgw text-white font-semibold"},"Словарь юриста")],-1),Cp={__name:"Header",setup(t){return(e,n)=>(Ue(),lt("header",null,[J("div",wp,[J("div",null,[J("img",{width:"150",height:"130",class:"mx-auto",src:pf(yp),alt:"Lawity logo"},null,8,bp)]),Ep])]))}};var rl={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m=function(t,e){if(!t)throw Sn(e)},Sn=function(t){return new Error("Firebase Database ("+du.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kp=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},So={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),i.push(n[u],n[d],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hu(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kp(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new Ip;const h=s<<2|a>>4;if(i.push(h),c!==64){const f=a<<4&240|c>>2;if(i.push(f),d!==64){const p=c<<6&192|d;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ip extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fu=function(t){const e=hu(t);return So.encodeByteArray(e,!0)},sr=function(t){return fu(t).replace(/\./g,"")},Fs=function(t){try{return So.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){return pu(void 0,t)}function pu(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!xp(n)||(t[n]=pu(t[n],e[n]));return t}function xp(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=()=>Tp().__FIREBASE_DEFAULTS__,Ap=()=>{if(typeof process>"u"||typeof rl>"u")return;const t=rl.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Op=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fs(t[1]);return e&&JSON.parse(e)},gu=()=>{try{return Dp()||Ap()||Op()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lp=t=>{var e,n;return(n=(e=gu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Np=t=>{const e=Lp(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},_u=()=>{var t;return(t=gu())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sr(JSON.stringify(n)),sr(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pp())}function Mp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vu(){return du.NODE_ADMIN===!0}function Fp(){try{return typeof indexedDB=="object"}catch{return!1}}function Bp(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="FirebaseError";class vi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Hp,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?Vp(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new vi(r,a,i)}}function Vp(t,e){return t.replace(Wp,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Wp=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t){return JSON.parse(t)}function re(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=ii(Fs(s[0])||""),n=ii(Fs(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},jp=function(t){const e=wu(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},zp=function(t){const e=wu(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function sl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function or(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Bs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(ol(s)&&ol(o)){if(!Bs(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ol(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function To(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,m(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Gr=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){return t&&t._delegate?t._delegate:t}class ri{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new xo;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gp(e))try{this.getOrInitializeService({instanceIdentifier:St})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=St){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=St){return this.instances.has(e)}getOptions(e=St){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Kp(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=St){return this.component?this.component.multipleInstances?e:St:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kp(t){return t===St?void 0:t}function Gp(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Yp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(q||(q={}));const Xp={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Jp=q.INFO,Zp={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},eg=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Zp[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bu{constructor(e){this.name=e,this._logLevel=Jp,this._logHandler=eg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...e),this._logHandler(this,q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...e),this._logHandler(this,q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,q.INFO,...e),this._logHandler(this,q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,q.WARN,...e),this._logHandler(this,q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...e),this._logHandler(this,q.ERROR,...e)}}const tg=(t,e)=>e.some(n=>t instanceof n);let al,ll;function ng(){return al||(al=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ig(){return ll||(ll=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Eu=new WeakMap,Hs=new WeakMap,Cu=new WeakMap,ls=new WeakMap,Do=new WeakMap;function rg(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(dt(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Eu.set(n,t)}).catch(()=>{}),Do.set(e,t),e}function sg(t){if(Hs.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Hs.set(t,e)}let Vs={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hs.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function og(t){Vs=t(Vs)}function ag(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(cs(this),e,...n);return Cu.set(i,e.sort?e.sort():[e]),dt(i)}:ig().includes(t)?function(...e){return t.apply(cs(this),e),dt(Eu.get(this))}:function(...e){return dt(t.apply(cs(this),e))}}function lg(t){return typeof t=="function"?ag(t):(t instanceof IDBTransaction&&sg(t),tg(t,ng())?new Proxy(t,Vs):t)}function dt(t){if(t instanceof IDBRequest)return rg(t);if(ls.has(t))return ls.get(t);const e=lg(t);return e!==t&&(ls.set(t,e),Do.set(e,t)),e}const cs=t=>Do.get(t);function cg(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=dt(o);return i&&o.addEventListener("upgradeneeded",l=>{i(dt(o.result),l.oldVersion,l.newVersion,dt(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const ug=["get","getKey","getAll","getAllKeys","count"],dg=["put","add","delete","clear"],us=new Map;function cl(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(us.get(e))return us.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=dg.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||ug.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return us.set(e,s),s}og(t=>({...t,get:(e,n,i)=>cl(e,n)||t.get(e,n,i),has:(e,n)=>!!cl(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fg(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function fg(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ws="@firebase/app",ul="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt=new bu("@firebase/app"),pg="@firebase/app-compat",gg="@firebase/analytics-compat",_g="@firebase/analytics",mg="@firebase/app-check-compat",vg="@firebase/app-check",yg="@firebase/auth",wg="@firebase/auth-compat",bg="@firebase/database",Eg="@firebase/database-compat",Cg="@firebase/functions",kg="@firebase/functions-compat",Ig="@firebase/installations",Sg="@firebase/installations-compat",xg="@firebase/messaging",Tg="@firebase/messaging-compat",Dg="@firebase/performance",Ag="@firebase/performance-compat",Og="@firebase/remote-config",Lg="@firebase/remote-config-compat",Ng="@firebase/storage",Rg="@firebase/storage-compat",Pg="@firebase/firestore",Mg="@firebase/vertexai-preview",Fg="@firebase/firestore-compat",Bg="firebase",Hg="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]",Vg={[Ws]:"fire-core",[pg]:"fire-core-compat",[_g]:"fire-analytics",[gg]:"fire-analytics-compat",[vg]:"fire-app-check",[mg]:"fire-app-check-compat",[yg]:"fire-auth",[wg]:"fire-auth-compat",[bg]:"fire-rtdb",[Eg]:"fire-rtdb-compat",[Cg]:"fire-fn",[kg]:"fire-fn-compat",[Ig]:"fire-iid",[Sg]:"fire-iid-compat",[xg]:"fire-fcm",[Tg]:"fire-fcm-compat",[Dg]:"fire-perf",[Ag]:"fire-perf-compat",[Og]:"fire-rc",[Lg]:"fire-rc-compat",[Ng]:"fire-gcs",[Rg]:"fire-gcs-compat",[Pg]:"fire-fst",[Fg]:"fire-fst-compat",[Mg]:"fire-vertex","fire-js":"fire-js",[Bg]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new Map,Wg=new Map,zs=new Map;function dl(t,e){try{t.container.addComponent(e)}catch(n){Vt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ar(t){const e=t.name;if(zs.has(e))return Vt.debug(`There were multiple attempts to register component ${e}.`),!1;zs.set(e,t);for(const n of si.values())dl(n,t);for(const n of Wg.values())dl(n,t);return!0}function jg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ht=new yu("app","Firebase",zg);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ht.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=Hg;function ku(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:js,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ht.create("bad-app-name",{appName:String(r)});if(n||(n=_u()),!n)throw ht.create("no-options");const s=si.get(r);if(s){if(Bs(n,s.options)&&Bs(i,s.config))return s;throw ht.create("duplicate-app",{appName:r})}const o=new Qp(r);for(const l of zs.values())o.addComponent(l);const a=new $g(n,i,o);return si.set(r,a),a}function Ug(t=js){const e=si.get(t);if(!e&&t===js&&_u())return ku();if(!e)throw ht.create("no-app",{appName:t});return e}function hl(){return Array.from(si.values())}function ln(t,e,n){var i;let r=(i=Vg[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vt.warn(a.join(" "));return}ar(new ri(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="firebase-heartbeat-database",Kg=1,oi="firebase-heartbeat-store";let ds=null;function Iu(){return ds||(ds=cg(Yg,Kg,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oi)}catch(n){console.warn(n)}}}}).catch(t=>{throw ht.create("idb-open",{originalErrorMessage:t.message})})),ds}async function Gg(t){try{const n=(await Iu()).transaction(oi),i=await n.objectStore(oi).get(Su(t));return await n.done,i}catch(e){if(e instanceof vi)Vt.warn(e.message);else{const n=ht.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vt.warn(n.message)}}}async function fl(t,e){try{const i=(await Iu()).transaction(oi,"readwrite");await i.objectStore(oi).put(e,Su(t)),await i.done}catch(n){if(n instanceof vi)Vt.warn(n.message);else{const i=ht.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vt.warn(i.message)}}}function Su(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=1024,Xg=30*24*60*60*1e3;class Jg{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e_(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pl();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Xg}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pl(),{heartbeatsToSend:i,unsentEntries:r}=Zg(this._heartbeatsCache.heartbeats),s=sr(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function pl(){return new Date().toISOString().substring(0,10)}function Zg(t,e=Qg){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),gl(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),gl(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class e_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fp()?Bp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gg(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return fl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return fl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gl(t){return sr(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t){ar(new ri("platform-logger",e=>new hg(e),"PRIVATE")),ar(new ri("heartbeat",e=>new Jg(e),"PRIVATE")),ln(Ws,ul,t),ln(Ws,ul,"esm2017"),ln("fire-js","")}t_("");var n_="firebase",i_="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln(n_,i_,"app");var _l={};const ml="@firebase/database",vl="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu="";function r_(t){xu=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),re(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ii(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return $e(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new s_(e)}}catch{}return new o_},Rt=Tu("localStorage"),a_=Tu("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=new bu("@firebase/database"),l_=function(){let t=1;return function(){return t++}}(),Du=function(t){const e=Up(t),n=new qp;n.update(e);const i=n.digest();return So.encodeByteArray(i)},wi=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=wi.apply(null,i):typeof i=="object"?e+=re(i):e+=i,e+=" "}return e};let Wn=null,yl=!0;const c_=function(t,e){m(!e,"Can't turn on custom loggers persistently."),cn.logLevel=q.VERBOSE,Wn=cn.log.bind(cn)},le=function(...t){if(yl===!0&&(yl=!1,Wn===null&&a_.get("logging_enabled")===!0&&c_()),Wn){const e=wi.apply(null,t);Wn(e)}},bi=function(t){return function(...e){le(t,...e)}},$s=function(...t){const e="FIREBASE INTERNAL ERROR: "+wi(...t);cn.error(e)},Xe=function(...t){const e=`FIREBASE FATAL ERROR: ${wi(...t)}`;throw cn.error(e),new Error(e)},ve=function(...t){const e="FIREBASE WARNING: "+wi(...t);cn.warn(e)},u_=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ve("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ao=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},d_=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wt="[MIN_NAME]",vt="[MAX_NAME]",xn=function(t,e){if(t===e)return 0;if(t===Wt||e===vt)return-1;if(e===Wt||t===vt)return 1;{const n=wl(t),i=wl(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},h_=function(t,e){return t===e?0:t<e?-1:1},Ln=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+re(e))},Oo=function(t){if(typeof t!="object"||t===null)return re(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=re(e[i]),n+=":",n+=Oo(t[e[i]]);return n+="}",n},Au=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function me(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Ou=function(t){m(!Ao(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},f_=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},p_=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function g_(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const __=new RegExp("^-?(0*)\\d{1,10}$"),m_=-2147483648,v_=2147483647,wl=function(t){if(__.test(t)){const e=Number(t);if(e>=m_&&e<=v_)return e}return null},Ei=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ve("Exception was thrown by user callback.",n),e},Math.floor(0))}},y_=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},jn=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ve(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(le("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ve(e)}}class Qi{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Qi.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="5",Lu="v",Nu="s",Ru="r",Pu="f",Mu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fu="ls",Bu="p",qs="ac",Hu="websocket",Vu="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rt.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function E_(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ju(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let i;if(e===Hu)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Vu)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);E_(t)&&(n.ns=t.namespace);const r=[];return me(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.counters_={}}incrementCounter(e,n=1){$e(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Sp(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs={},fs={};function No(t){const e=t.toString();return hs[e]||(hs[e]=new C_),hs[e]}function k_(t,e){const n=t.toString();return fs[n]||(fs[n]=e()),fs[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ei(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl="start",S_="close",x_="pLPCommand",T_="pRTLPCB",zu="id",$u="pw",qu="ser",D_="cb",A_="seg",O_="ts",L_="d",N_="dframe",Uu=1870,Yu=30,R_=Uu-Yu,P_=25e3,M_=3e4;class nn{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bi(e),this.stats_=No(n),this.urlFn=l=>(this.appCheckToken&&(l[qs]=this.appCheckToken),ju(n,Vu,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new I_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(M_)),d_(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ro((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===bl)this.id=a,this.password=l;else if(o===S_)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[bl]="t",i[qu]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[D_]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Lu]=Lo,this.transportSessionId&&(i[Nu]=this.transportSessionId),this.lastSessionId&&(i[Fu]=this.lastSessionId),this.applicationId&&(i[Bu]=this.applicationId),this.appCheckToken&&(i[qs]=this.appCheckToken),typeof location<"u"&&location.hostname&&Mu.test(location.hostname)&&(i[Ru]=Pu);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nn.forceAllow_=!0}static forceDisallow(){nn.forceDisallow_=!0}static isAvailable(){return nn.forceAllow_?!0:!nn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!f_()&&!p_()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=re(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=fu(n),r=Au(i,R_);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[N_]="t",i[zu]=e,i[$u]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=re(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ro{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=l_(),window[x_+this.uniqueCallbackIdentifier]=e,window[T_+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ro.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){le("frame writing exception"),a.stack&&le(a.stack),le(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||le("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[zu]=this.myID,e[$u]=this.myPW,e[qu]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Yu+i.length<=Uu;){const o=this.pendingSegs.shift();i=i+"&"+A_+r+"="+o.seg+"&"+O_+r+"="+o.ts+"&"+L_+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(P_)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{le("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=16384,B_=45e3;let lr=null;typeof MozWebSocket<"u"?lr=MozWebSocket:typeof WebSocket<"u"&&(lr=WebSocket);class Re{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bi(this.connId),this.stats_=No(n),this.connURL=Re.connectionURL_(n,o,a,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const o={};return o[Lu]=Lo,typeof location<"u"&&location.hostname&&Mu.test(location.hostname)&&(o[Ru]=Pu),n&&(o[Nu]=n),i&&(o[Fu]=i),r&&(o[qs]=r),s&&(o[Bu]=s),ju(e,Hu,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rt.set("previous_websocket_failure",!0);try{let i;vu(),this.mySock=new lr(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Re.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&lr!==null&&!Re.forceDisallow_}static previouslyFailed(){return Rt.isInMemoryStorage||Rt.get("previous_websocket_failure")===!0}markConnectionHealthy(){Rt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=ii(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(m(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=re(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Au(n,F_);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(B_))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Re.responsesRequiredToBeHealthy=2;Re.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nn,Re]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Re&&Re.isAvailable();let i=n&&!Re.previouslyFailed();if(e.webSocketOnly&&(n||ve("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Re];else{const r=this.transports_=[];for(const s of ai.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);ai.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ai.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=6e4,V_=5e3,W_=10*1024,j_=100*1024,ps="t",El="d",z_="s",Cl="r",$_="e",kl="o",Il="a",Sl="n",xl="p",q_="h";class U_{constructor(e,n,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bi("c:"+this.id+":"),this.transportManager_=new ai(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=jn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>j_?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>W_?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ps in e){const n=e[ps];n===Il?this.upgradeIfSecondaryHealthy_():n===Cl?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===kl&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ln("t",e),i=Ln("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:xl,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Il,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Sl,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ln("t",e),i=Ln("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ln(ps,e);if(El in e){const i=e[El];if(n===q_){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Sl){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===z_?this.onConnectionShutdown_(i):n===Cl?this.onReset_(i):n===$_?$s("Server Error: "+i):n===kl?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$s("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Lo!==i&&ve("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),jn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(H_))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(V_))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:xl,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Gu{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cr}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=32,Dl=768;class z{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function B(){return new z("")}function M(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function yt(t){return t.pieces_.length-t.pieceNum_}function U(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new z(t.pieces_,e)}function Qu(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Y_(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Xu(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ju(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new z(e,0)}function te(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof z)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new z(n,0)}function F(t){return t.pieceNum_>=t.pieces_.length}function he(t,e){const n=M(t),i=M(e);if(n===null)return e;if(n===i)return he(U(t),U(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Po(t,e){if(yt(t)!==yt(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Me(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(yt(t)>yt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class K_{constructor(e,n){this.errorPrefix_=n,this.parts_=Xu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Gr(this.parts_[i]);Zu(this)}}function G_(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Gr(e),Zu(t)}function Q_(t){const e=t.parts_.pop();t.byteLength_-=Gr(e),t.parts_.length>0&&(t.byteLength_-=1)}function Zu(t){if(t.byteLength_>Dl)throw new Error(t.errorPrefix_+"has a key path longer than "+Dl+" bytes ("+t.byteLength_+").");if(t.parts_.length>Tl)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Tl+") or object contains a cycle "+xt(t))}function xt(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Gu{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Mo}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=1e3,X_=60*5*1e3,Al=30*1e3,J_=1.3,Z_=3e4,em="server_kill",Ol=3;class Ge extends Ku{constructor(e,n,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ge.nextPersistentConnectionId_++,this.log_=bi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nn,this.maxReconnectDelay_=X_,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!vu())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mo.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cr.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(re(s)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new xo,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),m(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Ge.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&$e(e,"w")){const i=mn(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ve(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||zp(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Al)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=jp(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),m(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+re(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):$s("Unrecognized action received from server: "+re(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Nn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Z_&&(this.reconnectDelay_=Nn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*J_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ge.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(d){m(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?le("getToken() completed but was canceled"):(le("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new U_(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{ve(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(em)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ve(d),l())}}}interrupt(e){le("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){le("Resuming connection for reason: "+e),delete this.interruptReasons_[e],sl(this.interruptReasons_)&&(this.reconnectDelay_=Nn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>Oo(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new z(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){le("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ol&&(this.reconnectDelay_=Al,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){le("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ol&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+xu.replace(/\./g,"-")]=1,mu()?e["framework.cordova"]=1:Mp()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cr.getInstance().currentlyOnline();return sl(this.interruptReasons_)&&e}}Ge.nextPersistentConnectionId_=0;Ge.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new P(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new P(Wt,e),r=new P(Wt,n);return this.compare(i,r)!==0}minPost(){return P.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bi;class ed extends Qr{static get __EMPTY_NODE(){return Bi}static set __EMPTY_NODE(e){Bi=e}compare(e,n){return xn(e.name,n.name)}isDefinedOn(e){throw Sn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return P.MIN}maxPost(){return new P(vt,Bi)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new P(e,Bi)}toString(){return".key"}}const ft=new ed;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ie{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ie.RED,this.left=r??fe.EMPTY_NODE,this.right=s??fe.EMPTY_NODE}copy(e,n,i,r,s){return new ie(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return fe.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return fe.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ie.RED=!0;ie.BLACK=!1;class tm{copy(e,n,i,r,s){return this}insert(e,n,i){return new ie(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class fe{constructor(e,n=fe.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new fe(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ie.BLACK,null,null))}remove(e){return new fe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ie.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Hi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Hi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Hi(this.root_,null,this.comparator_,!0,e)}}fe.EMPTY_NODE=new tm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){return xn(t.name,e.name)}function Fo(t,e){return xn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Us;function im(t){Us=t}const td=function(t){return typeof t=="number"?"number:"+Ou(t):"string:"+t},nd=function(t){if(t.isLeafNode()){const e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&$e(e,".sv"),"Priority must be a string or number.")}else m(t===Us||t.isEmpty(),"priority of unexpected type.");m(t===Us||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll;class ne{constructor(e,n=ne.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),nd(this.priorityNode_)}static set __childrenNodeConstructor(e){Ll=e}static get __childrenNodeConstructor(){return Ll}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ne(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ne.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return F(e)?this:M(e)===".priority"?this.priorityNode_:ne.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ne.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=M(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||yt(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ne.__childrenNodeConstructor.EMPTY_NODE.updateChild(U(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+td(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Ou(this.value_):e+=this.value_,this.lazyHash_=Du(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ne.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ne.__childrenNodeConstructor?-1:(m(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=ne.VALUE_TYPE_ORDER.indexOf(n),s=ne.VALUE_TYPE_ORDER.indexOf(i);return m(r>=0,"Unknown leaf type: "+n),m(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ne.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id,rd;function rm(t){id=t}function sm(t){rd=t}class om extends Qr{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?xn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return P.MIN}maxPost(){return new P(vt,new ne("[PRIORITY-POST]",rd))}makePost(e,n){const i=id(e);return new P(n,new ne("[PRIORITY-POST]",i))}toString(){return".priority"}}const G=new om;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=Math.log(2);class lm{constructor(e){const n=s=>parseInt(Math.log(s)/am,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ur=function(t,e,n,i){t.sort(e);const r=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new ie(h,d.node,ie.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=r(l,f),g=r(f+1,c);return d=t[f],h=n?n(d):d,new ie(h,d.node,ie.BLACK,p,g)}},s=function(l){let c=null,u=null,d=t.length;const h=function(p,g){const _=d-p,C=d;d-=p;const O=r(_+1,C),T=t[_],b=n?n(T):T;f(new ie(b,T.node,g,null,O))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),_=Math.pow(2,l.count-(p+1));g?h(_,ie.BLACK):(h(_,ie.BLACK),h(_,ie.RED))}return u},o=new lm(t.length),a=s(o);return new fe(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gs;const en={};class Ke{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return m(en&&G,"ChildrenNode.ts has not been loaded"),gs=gs||new Ke({".priority":en},{".priority":G}),gs}get(e){const n=mn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof fe?n:null}hasIndex(e){return $e(this.indexSet_,e.toString())}addIndex(e,n){m(e!==ft,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(P.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=ur(i,e.getCompare()):a=en;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Ke(u,c)}addToIndexes(e,n){const i=or(this.indexes_,(r,s)=>{const o=mn(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),r===en)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(P.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),ur(a,o.getCompare())}else return en;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new P(e.name,a))),l.insert(e,e.node)}});return new Ke(i,this.indexSet_)}removeFromIndexes(e,n){const i=or(this.indexes_,r=>{if(r===en)return r;{const s=n.get(e.name);return s?r.remove(new P(e.name,s)):r}});return new Ke(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn;class x{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&nd(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Rn||(Rn=new x(new fe(Fo),null,Ke.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rn}updatePriority(e){return this.children_.isEmpty()?this:new x(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Rn:n}}getChild(e){const n=M(e);return n===null?this:this.getImmediateChild(n).getChild(U(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(m(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new P(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?Rn:this.priorityNode_;return new x(r,o,s)}}updateChild(e,n){const i=M(e);if(i===null)return n;{m(M(e)!==".priority"||yt(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(U(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(G,(o,a)=>{n[o]=a.val(e),i++,s&&x.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+td(this.getPriority().val())+":"),this.forEachChild(G,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":Du(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new P(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new P(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new P(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,P.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,P.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ci?-1:0}withIndex(e){if(e===ft||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new x(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ft||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(G),r=n.getIterator(G);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ft?null:this.indexMap_.get(e.toString())}}x.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class cm extends x{constructor(){super(new fe(Fo),x.EMPTY_NODE,Ke.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return x.EMPTY_NODE}isEmpty(){return!1}}const Ci=new cm;Object.defineProperties(P,{MIN:{value:new P(Wt,x.EMPTY_NODE)},MAX:{value:new P(vt,Ci)}});ed.__EMPTY_NODE=x.EMPTY_NODE;ne.__childrenNodeConstructor=x;im(Ci);sm(Ci);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=!0;function ce(t,e=null){if(t===null)return x.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ne(n,ce(e))}if(!(t instanceof Array)&&um){const n=[];let i=!1;if(me(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=ce(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new P(o,l)))}}),n.length===0)return x.EMPTY_NODE;const s=ur(n,nm,o=>o.name,Fo);if(i){const o=ur(n,G.getCompare());return new x(s,ce(e),new Ke({".priority":o},{".priority":G}))}else return new x(s,ce(e),Ke.Default)}else{let n=x.EMPTY_NODE;return me(t,(i,r)=>{if($e(t,i)&&i.substring(0,1)!=="."){const s=ce(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(ce(e))}}rm(ce);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Qr{constructor(e){super(),this.indexPath_=e,m(!F(e)&&M(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?xn(e.name,n.name):s}makePost(e,n){const i=ce(e),r=x.EMPTY_NODE.updateChild(this.indexPath_,i);return new P(n,r)}maxPost(){const e=x.EMPTY_NODE.updateChild(this.indexPath_,Ci);return new P(vt,e)}toString(){return Xu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends Qr{compare(e,n){const i=e.node.compareTo(n.node);return i===0?xn(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return P.MIN}maxPost(){return P.MAX}makePost(e,n){const i=ce(e);return new P(n,i)}toString(){return".value"}}const od=new dm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){return{type:"value",snapshotNode:t}}function vn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function li(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ci(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function hm(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.index_=e}updateChild(e,n,i,r,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(li(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(vn(n,i)):o.trackChildChange(ci(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(G,(r,s)=>{n.hasChild(r)||i.trackChildChange(li(r,s))}),n.isLeafNode()||n.forEachChild(G,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(ci(r,s,o))}else i.trackChildChange(vn(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?x.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.indexedFilter_=new Bo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ui.getStartPost_(e),this.endPost_=ui.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,s,o){return this.matches(new P(n,i))||(i=x.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=x.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(x.EMPTY_NODE);const s=this;return n.forEachChild(G,(o,a)=>{s.matches(new P(o,a))||(r=r.updateImmediateChild(o,x.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ui(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,s,o){return this.rangedFilter_.matches(new P(n,i))||(i=x.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,o):this.fullLimitUpdateChild_(e,n,i,s,o)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=x.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=x.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(x.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,x.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;m(a.numChildren()===this.limit_,"");const l=new P(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,l);if(u&&!i.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(ci(n,i,d)),a.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(li(n,d));const g=a.updateImmediateChild(n,x.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(vn(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return i.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(li(c.name,c.node)),s.trackChildChange(vn(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,x.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=G}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wt}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===G}copy(){const e=new Ho;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function pm(t){return t.loadsAllData()?new Bo(t.getIndex()):t.hasLimit()?new fm(t):new ui(t)}function gm(t,e,n){const i=t.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,n!=null?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function _m(t,e,n){const i=t.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,n!==void 0?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function mm(t,e){const n=t.copy();return n.index_=e,n}function Nl(t){const e={};if(t.isDefault())return e;let n;if(t.index_===G?n="$priority":t.index_===od?n="$value":t.index_===ft?n="$key":(m(t.index_ instanceof sd,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=re(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=re(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+re(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=re(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+re(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Rl(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==G&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Ku{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=bi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=dr.getListenId_(e,i),a={};this.listens_[o]=a;const l=Nl(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,i),mn(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(e,n){const i=dr.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Nl(e._queryParams),i=e._path.toString(),r=new xo;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$p(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ii(a.responseText)}catch{ve("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&ve("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this.rootNode_=x.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return{value:null,children:new Map}}function ld(t,e,n){if(F(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=M(e);t.children.has(i)||t.children.set(i,hr());const r=t.children.get(i);e=U(e),ld(r,e,n)}}function Ys(t,e,n){t.value!==null?n(e,t.value):ym(t,(i,r)=>{const s=new z(e.toString()+"/"+i);Ys(r,s,n)})}function ym(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&me(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=10*1e3,bm=30*1e3,Em=5*60*1e3;class Cm{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new wm(e);const i=Pl+(bm-Pl)*Math.random();jn(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;me(e,(r,s)=>{s>0&&$e(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),jn(this.reportStats_.bind(this),Math.floor(Math.random()*2*Em))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Fe||(Fe={}));function cd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Vo(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Wo(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Fe.ACK_USER_WRITE,this.source=cd()}operationForChild(e){if(F(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new z(e));return new fr(B(),n,this.revert)}}else return m(M(this.path)===e,"operationForChild called for unrelated child."),new fr(U(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.source=e,this.path=n,this.type=Fe.LISTEN_COMPLETE}operationForChild(e){return F(this.path)?new di(this.source,B()):new di(this.source,U(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Fe.OVERWRITE}operationForChild(e){return F(this.path)?new jt(this.source,B(),this.snap.getImmediateChild(e)):new jt(this.source,U(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Fe.MERGE}operationForChild(e){if(F(this.path)){const n=this.children.subtree(new z(e));return n.isEmpty()?null:n.value?new jt(this.source,B(),n.value):new hi(this.source,B(),n)}else return m(M(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hi(this.source,U(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;const n=M(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Im(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(hm(o.childName,o.snapshotNode))}),Pn(t,r,"child_removed",e,i,n),Pn(t,r,"child_added",e,i,n),Pn(t,r,"child_moved",s,i,n),Pn(t,r,"child_changed",e,i,n),Pn(t,r,"value",e,i,n),r}function Pn(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>xm(t,a,l)),o.forEach(a=>{const l=Sm(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Sm(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function xm(t,e,n){if(e.childName==null||n.childName==null)throw Sn("Should only compare child_ events.");const i=new P(e.childName,e.snapshotNode),r=new P(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){return{eventCache:t,serverCache:e}}function zn(t,e,n,i){return Xr(new zt(e,n,i),t.serverCache)}function ud(t,e,n,i){return Xr(t.eventCache,new zt(e,n,i))}function Ks(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $t(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _s;const Tm=()=>(_s||(_s=new fe(h_)),_s);class Y{constructor(e,n=Tm()){this.value=e,this.children=n}static fromObject(e){let n=new Y(null);return me(e,(i,r)=>{n=n.set(new z(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:B(),value:this.value};if(F(e))return null;{const i=M(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(U(e),n);return s!=null?{path:te(new z(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{const n=M(e),i=this.children.get(n);return i!==null?i.subtree(U(e)):new Y(null)}}set(e,n){if(F(e))return new Y(n,this.children);{const i=M(e),s=(this.children.get(i)||new Y(null)).set(U(e),n),o=this.children.insert(i,s);return new Y(this.value,o)}}remove(e){if(F(e))return this.children.isEmpty()?new Y(null):new Y(null,this.children);{const n=M(e),i=this.children.get(n);if(i){const r=i.remove(U(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new Y(null):new Y(this.value,s)}else return this}}get(e){if(F(e))return this.value;{const n=M(e),i=this.children.get(n);return i?i.get(U(e)):null}}setTree(e,n){if(F(e))return n;{const i=M(e),s=(this.children.get(i)||new Y(null)).setTree(U(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new Y(this.value,o)}}fold(e){return this.fold_(B(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(te(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,B(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(F(e))return null;{const s=M(e),o=this.children.get(s);return o?o.findOnPath_(U(e),te(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,B(),n)}foreachOnPath_(e,n,i){if(F(e))return this;{this.value&&i(n,this.value);const r=M(e),s=this.children.get(r);return s?s.foreachOnPath_(U(e),te(n,r),i):new Y(null)}}foreach(e){this.foreach_(B(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(te(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.writeTree_=e}static empty(){return new Be(new Y(null))}}function $n(t,e,n){if(F(e))return new Be(new Y(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=he(r,e);return s=s.updateChild(o,n),new Be(t.writeTree_.set(r,s))}else{const r=new Y(n),s=t.writeTree_.setTree(e,r);return new Be(s)}}}function Ml(t,e,n){let i=t;return me(n,(r,s)=>{i=$n(i,te(e,r),s)}),i}function Fl(t,e){if(F(e))return Be.empty();{const n=t.writeTree_.setTree(e,new Y(null));return new Be(n)}}function Gs(t,e){return Gt(t,e)!=null}function Gt(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(he(n.path,e)):null}function Bl(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(G,(i,r)=>{e.push(new P(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new P(i,r.value))}),e}function pt(t,e){if(F(e))return t;{const n=Gt(t,e);return n!=null?new Be(new Y(n)):new Be(t.writeTree_.subtree(e))}}function Qs(t){return t.writeTree_.isEmpty()}function yn(t,e){return dd(B(),t.writeTree_,e)}function dd(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=dd(te(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(te(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t,e){return gd(e,t)}function Dm(t,e,n,i,r){m(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=$n(t.visibleWrites,e,n)),t.lastWriteId=i}function Am(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function Om(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Lm(a,i.path)?r=!1:Me(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return Nm(t),!0;if(i.snap)t.visibleWrites=Fl(t.visibleWrites,i.path);else{const a=i.children;me(a,l=>{t.visibleWrites=Fl(t.visibleWrites,te(i.path,l))})}return!0}else return!1}function Lm(t,e){if(t.snap)return Me(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Me(te(t.path,n),e))return!0;return!1}function Nm(t){t.visibleWrites=hd(t.allWrites,Rm,B()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Rm(t){return t.visible}function hd(t,e,n){let i=Be.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)Me(n,o)?(a=he(n,o),i=$n(i,a,s.snap)):Me(o,n)&&(a=he(o,n),i=$n(i,B(),s.snap.getChild(a)));else if(s.children){if(Me(n,o))a=he(n,o),i=Ml(i,a,s.children);else if(Me(o,n))if(a=he(o,n),F(a))i=Ml(i,B(),s.children);else{const l=mn(s.children,M(a));if(l){const c=l.getChild(U(a));i=$n(i,B(),c)}}}else throw Sn("WriteRecord should have .snap or .children")}}return i}function fd(t,e,n,i,r){if(!i&&!r){const s=Gt(t.visibleWrites,e);if(s!=null)return s;{const o=pt(t.visibleWrites,e);if(Qs(o))return n;if(n==null&&!Gs(o,B()))return null;{const a=n||x.EMPTY_NODE;return yn(o,a)}}}else{const s=pt(t.visibleWrites,e);if(!r&&Qs(s))return n;if(!r&&n==null&&!Gs(s,B()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Me(c.path,e)||Me(e,c.path))},a=hd(t.allWrites,o,e),l=n||x.EMPTY_NODE;return yn(a,l)}}}function Pm(t,e,n){let i=x.EMPTY_NODE;const r=Gt(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(G,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=pt(t.visibleWrites,e);return n.forEachChild(G,(o,a)=>{const l=yn(pt(s,new z(o)),a);i=i.updateImmediateChild(o,l)}),Bl(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=pt(t.visibleWrites,e);return Bl(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Mm(t,e,n,i,r){m(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=te(e,n);if(Gs(t.visibleWrites,s))return null;{const o=pt(t.visibleWrites,s);return Qs(o)?r.getChild(n):yn(o,r.getChild(n))}}function Fm(t,e,n,i){const r=te(e,n),s=Gt(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=pt(t.visibleWrites,r);return yn(o,i.getNode().getImmediateChild(n))}else return null}function Bm(t,e){return Gt(t.visibleWrites,e)}function Hm(t,e,n,i,r,s,o){let a;const l=pt(t.visibleWrites,e),c=Gt(l,B());if(c!=null)a=c;else if(n!=null)a=yn(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Vm(){return{visibleWrites:Be.empty(),allWrites:[],lastWriteId:-1}}function pr(t,e,n,i){return fd(t.writeTree,t.treePath,e,n,i)}function zo(t,e){return Pm(t.writeTree,t.treePath,e)}function Hl(t,e,n,i){return Mm(t.writeTree,t.treePath,e,n,i)}function gr(t,e){return Bm(t.writeTree,te(t.treePath,e))}function Wm(t,e,n,i,r,s){return Hm(t.writeTree,t.treePath,e,n,i,r,s)}function $o(t,e,n){return Fm(t.writeTree,t.treePath,e,n)}function pd(t,e){return gd(te(t.treePath,e),t.writeTree)}function gd(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,ci(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,li(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,vn(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,ci(i,e.snapshotNode,r.oldSnap));else throw Sn("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const _d=new zm;class qo{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new zt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $o(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$t(this.viewCache_),s=Wm(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){return{filter:t}}function qm(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Um(t,e,n,i,r){const s=new jm;let o,a;if(n.type===Fe.OVERWRITE){const c=n;c.source.fromUser?o=Xs(t,e,c.path,c.snap,i,r,s):(m(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!F(c.path),o=_r(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===Fe.MERGE){const c=n;c.source.fromUser?o=Km(t,e,c.path,c.children,i,r,s):(m(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Js(t,e,c.path,c.children,i,r,a,s))}else if(n.type===Fe.ACK_USER_WRITE){const c=n;c.revert?o=Xm(t,e,c.path,i,r,s):o=Gm(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===Fe.LISTEN_COMPLETE)o=Qm(t,e,n.path,i,s);else throw Sn("Unknown operation type: "+n.type);const l=s.getChanges();return Ym(e,o,l),{viewCache:o,changes:l}}function Ym(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Ks(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(ad(Ks(e)))}}function md(t,e,n,i,r,s){const o=e.eventCache;if(gr(i,n)!=null)return e;{let a,l;if(F(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=$t(e),u=c instanceof x?c:x.EMPTY_NODE,d=zo(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=pr(i,$t(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=M(n);if(c===".priority"){m(yt(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=Hl(i,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=U(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=Hl(i,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=$o(i,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,r,s):a=o.getNode()}}return zn(e,a,o.isFullyInitialized()||F(n),t.filter.filtersNodes())}}function _r(t,e,n,i,r,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(F(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=M(n);if(!l.isCompleteForPath(n)&&yt(n)>1)return e;const p=U(n),_=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),_):c=u.updateChild(l.getNode(),f,_,p,_d,null)}const d=ud(e,c,l.isFullyInitialized()||F(n),u.filtersNodes()),h=new qo(r,d,s);return md(t,d,n,r,h,a)}function Xs(t,e,n,i,r,s,o){const a=e.eventCache;let l,c;const u=new qo(r,e,s);if(F(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=zn(e,c,!0,t.filter.filtersNodes());else{const d=M(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=zn(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=U(n),f=a.getNode().getImmediateChild(d);let p;if(F(h))p=i;else{const g=u.getCompleteChild(d);g!=null?Qu(h)===".priority"&&g.getChild(Ju(h)).isEmpty()?p=g:p=g.updateChild(h,i):p=x.EMPTY_NODE}if(f.equals(p))l=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);l=zn(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Vl(t,e){return t.eventCache.isCompleteForChild(e)}function Km(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=te(n,l);Vl(e,M(u))&&(a=Xs(t,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=te(n,l);Vl(e,M(u))||(a=Xs(t,a,u,c,r,s,o))}),a}function Wl(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Js(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;F(n)?c=i:c=new Y(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=Wl(t,f,h);l=_r(t,l,new z(d),p,r,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=Wl(t,p,h);l=_r(t,l,new z(d),g,r,s,o,a)}}),l}function Gm(t,e,n,i,r,s,o){if(gr(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(F(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return _r(t,e,n,l.getNode().getChild(n),r,s,a,o);if(F(n)){let c=new Y(null);return l.getNode().forEachChild(ft,(u,d)=>{c=c.set(new z(u),d)}),Js(t,e,n,c,r,s,a,o)}else return e}else{let c=new Y(null);return i.foreach((u,d)=>{const h=te(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),Js(t,e,n,c,r,s,a,o)}}function Qm(t,e,n,i,r){const s=e.serverCache,o=ud(e,s.getNode(),s.isFullyInitialized()||F(n),s.isFiltered());return md(t,o,n,i,_d,r)}function Xm(t,e,n,i,r,s){let o;if(gr(i,n)!=null)return e;{const a=new qo(i,e,r),l=e.eventCache.getNode();let c;if(F(n)||M(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=pr(i,$t(e));else{const d=e.serverCache.getNode();m(d instanceof x,"serverChildren would be complete if leaf node"),u=zo(i,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=M(n);let d=$o(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,U(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,x.EMPTY_NODE,U(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pr(i,$t(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||gr(i,B())!=null,zn(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Bo(i.getIndex()),s=pm(i);this.processor_=$m(s);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(x.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(x.EMPTY_NODE,a.getNode(),null),u=new zt(l,o.isFullyInitialized(),r.filtersNodes()),d=new zt(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Xr(d,u),this.eventGenerator_=new km(this.query_)}get query(){return this.query_}};function Zm(t){return t.viewCache_.serverCache.getNode()}function ev(t,e){const n=$t(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!F(e)&&!n.getImmediateChild(M(e)).isEmpty())?n.getChild(e):null}function jl(t){return t.eventRegistrations_.length===0}function tv(t,e){t.eventRegistrations_.push(e)}function zl(t,e,n){const i=[];if(n){m(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function $l(t,e,n,i){e.type===Fe.MERGE&&e.source.queryId!==null&&(m($t(t.viewCache_),"We should always have a full cache before handling merges"),m(Ks(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=Um(t.processor_,r,e,n,i);return qm(t.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,vd(t,s.changes,s.viewCache.eventCache.getNode(),null)}function nv(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(G,(s,o)=>{i.push(vn(s,o))}),n.isFullyInitialized()&&i.push(ad(n.getNode())),vd(t,i,n.getNode(),e)}function vd(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return Im(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mr;class iv{constructor(){this.views=new Map}}function rv(t){m(!mr,"__referenceConstructor has already been defined"),mr=t}function sv(){return m(mr,"Reference.ts has not been loaded"),mr}function ov(t){return t.views.size===0}function Uo(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return m(s!=null,"SyncTree gave us an op for an invalid query."),$l(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat($l(o,e,n,i));return s}}function av(t,e,n,i,r){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=pr(n,r?i:null),l=!1;a?l=!0:i instanceof x?(a=zo(n,i),l=!1):(a=x.EMPTY_NODE,l=!1);const c=Xr(new zt(a,l,!1),new zt(i,r,!1));return new Jm(e,c)}return o}function lv(t,e,n,i,r,s){const o=av(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),tv(o,n),nv(o,n)}function cv(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const a=wt(t);if(r==="default")for(const[l,c]of t.views.entries())o=o.concat(zl(c,n,i)),jl(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(r);l&&(o=o.concat(zl(l,n,i)),jl(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!wt(t)&&s.push(new(sv())(e._repo,e._path)),{removed:s,events:o}}function yd(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function un(t,e){let n=null;for(const i of t.views.values())n=n||ev(i,e);return n}function wd(t,e){if(e._queryParams.loadsAllData())return Jr(t);{const i=e._queryIdentifier;return t.views.get(i)}}function bd(t,e){return wd(t,e)!=null}function wt(t){return Jr(t)!=null}function Jr(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vr;function uv(t){m(!vr,"__referenceConstructor has already been defined"),vr=t}function dv(){return m(vr,"Reference.ts has not been loaded"),vr}let hv=1;class ql{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Y(null),this.pendingWriteTree_=Vm(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fv(t,e,n,i,r){return Dm(t.pendingWriteTree_,e,n,i,r),r?ki(t,new jt(cd(),e,n)):[]}function rn(t,e,n=!1){const i=Am(t.pendingWriteTree_,e);if(Om(t.pendingWriteTree_,e)){let s=new Y(null);return i.snap!=null?s=s.set(B(),!0):me(i.children,o=>{s=s.set(new z(o),!0)}),ki(t,new fr(i.path,s,n))}else return[]}function Zr(t,e,n){return ki(t,new jt(Vo(),e,n))}function pv(t,e,n){const i=Y.fromObject(n);return ki(t,new hi(Vo(),e,i))}function gv(t,e){return ki(t,new di(Vo(),e))}function _v(t,e,n){const i=Yo(t,n);if(i){const r=Ko(i),s=r.path,o=r.queryId,a=he(s,e),l=new di(Wo(o),a);return Go(t,s,l)}else return[]}function Zs(t,e,n,i,r=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||bd(o,e))){const l=cv(o,e,n,i);ov(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>wt(f));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=yv(h);for(let p=0;p<f.length;++p){const g=f[p],_=g.query,C=Id(t,g);t.listenProvider_.startListening(qn(_),yr(t,_),C.hashFn,C.onComplete)}}}!d&&c.length>0&&!i&&(u?t.listenProvider_.stopListening(qn(e),null):c.forEach(h=>{const f=t.queryToTagMap.get(es(h));t.listenProvider_.stopListening(qn(h),f)}))}wv(t,c)}return a}function mv(t,e,n,i){const r=Yo(t,i);if(r!=null){const s=Ko(r),o=s.path,a=s.queryId,l=he(o,e),c=new jt(Wo(a),l,n);return Go(t,o,c)}else return[]}function vv(t,e,n,i){const r=Yo(t,i);if(r){const s=Ko(r),o=s.path,a=s.queryId,l=he(o,e),c=Y.fromObject(n),u=new hi(Wo(a),l,c);return Go(t,o,u)}else return[]}function Ul(t,e,n,i=!1){const r=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(r,(h,f)=>{const p=he(h,r);s=s||un(f,p),o=o||wt(f)});let a=t.syncPointTree_.get(r);a?(o=o||wt(a),s=s||un(a,B())):(a=new iv,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;s!=null?l=!0:(l=!1,s=x.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((f,p)=>{const g=un(p,B());g&&(s=s.updateImmediateChild(f,g))}));const c=bd(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=es(e);m(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=bv();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=jo(t.pendingWriteTree_,r);let d=lv(a,e,n,u,s,l);if(!c&&!o&&!i){const h=wd(a,e);d=d.concat(Ev(t,e,h))}return d}function Ed(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=he(o,e),c=un(a,l);if(c)return c});return fd(r,e,s,n,!0)}function ki(t,e){return Cd(e,t.syncPointTree_,null,jo(t.pendingWriteTree_,B()))}function Cd(t,e,n,i){if(F(t.path))return kd(t,e,n,i);{const r=e.get(B());n==null&&r!=null&&(n=un(r,B()));let s=[];const o=M(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=pd(i,o);s=s.concat(Cd(a,l,c,u))}return r&&(s=s.concat(Uo(r,t,i,n))),s}}function kd(t,e,n,i){const r=e.get(B());n==null&&r!=null&&(n=un(r,B()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=pd(i,o),u=t.operationForChild(o);u&&(s=s.concat(kd(u,a,l,c)))}),r&&(s=s.concat(Uo(r,t,i,n))),s}function Id(t,e){const n=e.query,i=yr(t,n);return{hashFn:()=>(Zm(e)||x.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?_v(t,n._path,i):gv(t,n._path);{const s=g_(r,n);return Zs(t,n,null,s)}}}}function yr(t,e){const n=es(e);return t.queryToTagMap.get(n)}function es(t){return t._path.toString()+"$"+t._queryIdentifier}function Yo(t,e){return t.tagToQueryMap.get(e)}function Ko(t){const e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new z(t.substr(0,e))}}function Go(t,e,n){const i=t.syncPointTree_.get(e);m(i,"Missing sync point for query tag that we're tracking");const r=jo(t.pendingWriteTree_,e);return Uo(i,n,r,null)}function yv(t){return t.fold((e,n,i)=>{if(n&&wt(n))return[Jr(n)];{let r=[];return n&&(r=yd(n)),me(i,(s,o)=>{r=r.concat(o)}),r}})}function qn(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(dv())(t._repo,t._path):t}function wv(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=es(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function bv(){return hv++}function Ev(t,e,n){const i=e._path,r=yr(t,e),s=Id(t,n),o=t.listenProvider_.startListening(qn(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(i);if(r)m(!wt(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!F(c)&&u&&wt(u))return[Jr(u).query];{let h=[];return u&&(h=h.concat(yd(u).map(f=>f.query))),me(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(qn(u),yr(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Qo(n)}node(){return this.node_}}class Xo{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=te(this.path_,e);return new Xo(this.syncTree_,n)}node(){return Ed(this.syncTree_,this.path_)}}const Cv=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Yl=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return kv(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Iv(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},kv=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},Iv=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&m(!1,"Unexpected increment value: "+i);const r=e.node();if(m(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},Sv=function(t,e,n,i){return Jo(e,new Xo(n,t),i)},xv=function(t,e,n){return Jo(t,new Qo(e),n)};function Jo(t,e,n){const i=t.getPriority().val(),r=Yl(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Yl(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new ne(a,ce(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new ne(r))),o.forEachChild(G,(a,l)=>{const c=Jo(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function ea(t,e){let n=e instanceof z?e:new z(e),i=t,r=M(n);for(;r!==null;){const s=mn(i.node.children,r)||{children:{},childCount:0};i=new Zo(r,i,s),n=U(n),r=M(n)}return i}function Tn(t){return t.node.value}function Sd(t,e){t.node.value=e,eo(t)}function xd(t){return t.node.childCount>0}function Tv(t){return Tn(t)===void 0&&!xd(t)}function ts(t,e){me(t.node.children,(n,i)=>{e(new Zo(n,t,i))})}function Td(t,e,n,i){n&&!i&&e(t),ts(t,r=>{Td(r,e,!0,i)}),n&&i&&e(t)}function Dv(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ii(t){return new z(t.parent===null?t.name:Ii(t.parent)+"/"+t.name)}function eo(t){t.parent!==null&&Av(t.parent,t.name,t)}function Av(t,e,n){const i=Tv(n),r=$e(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,eo(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,eo(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=/[\[\].#$\/\u0000-\u001F\u007F]/,Lv=/[\[\].#$\u0000-\u001F\u007F]/,ms=10*1024*1024,Dd=function(t){return typeof t=="string"&&t.length!==0&&!Ov.test(t)},Ad=function(t){return typeof t=="string"&&t.length!==0&&!Lv.test(t)},Nv=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ad(t)},Kl=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ao(t)||t&&typeof t=="object"&&$e(t,".sv")},Od=function(t,e,n,i){e!==void 0&&ta(To(t,"value"),e,n)},ta=function(t,e,n){const i=n instanceof z?new K_(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+xt(i));if(typeof e=="function")throw new Error(t+"contains a function "+xt(i)+" with contents = "+e.toString());if(Ao(e))throw new Error(t+"contains "+e.toString()+" "+xt(i));if(typeof e=="string"&&e.length>ms/3&&Gr(e)>ms)throw new Error(t+"contains a string greater than "+ms+" utf8 bytes "+xt(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(me(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Dd(o)))throw new Error(t+" contains an invalid key ("+o+") "+xt(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);G_(i,o),ta(t,a,i),Q_(i)}),r&&s)throw new Error(t+' contains ".value" child '+xt(i)+" in addition to actual children.")}},Ld=function(t,e,n,i){if(!Ad(n))throw new Error(To(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Rv=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ld(t,e,n)},Pv=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Dd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Nv(n))throw new Error(To(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Nd(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!Po(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function Rd(t,e,n){Nd(t,n),Pd(t,i=>Po(i,e))}function Qt(t,e,n){Nd(t,n),Pd(t,i=>Me(i,e)||Me(e,i))}function Pd(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(Fv(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Fv(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Wn&&le("event: "+n.toString()),Ei(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="repo_interrupt",Hv=25;class Vv{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hr(),this.transactionQueueTree_=new Zo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Wv(t,e,n){if(t.stats_=No(t.repoInfo_),t.forceRestClient_||y_())t.server_=new dr(t.repoInfo_,(i,r,s,o)=>{Gl(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ql(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{re(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Ge(t.repoInfo_,e,(i,r,s,o)=>{Gl(t,i,r,s,o)},i=>{Ql(t,i)},i=>{zv(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=k_(t.repoInfo_,()=>new Cm(t.stats_,t.server_)),t.infoData_=new vm,t.infoSyncTree_=new ql({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=Zr(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),na(t,"connected",!1),t.serverSyncTree_=new ql({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);Qt(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function jv(t){const n=t.infoData_.getNode(new z(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Md(t){return Cv({timestamp:jv(t)})}function Gl(t,e,n,i,r){t.dataUpdateCount++;const s=new z(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=or(n,c=>ce(c));o=vv(t.serverSyncTree_,s,l,r)}else{const l=ce(n);o=mv(t.serverSyncTree_,s,l,r)}else if(i){const l=or(n,c=>ce(c));o=pv(t.serverSyncTree_,s,l)}else{const l=ce(n);o=Zr(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ra(t,s)),Qt(t.eventQueue_,a,o)}function Ql(t,e){na(t,"connected",e),e===!1&&qv(t)}function zv(t,e){me(e,(n,i)=>{na(t,n,i)})}function na(t,e,n){const i=new z("/.info/"+e),r=ce(n);t.infoData_.updateSnapshot(i,r);const s=Zr(t.infoSyncTree_,i,r);Qt(t.eventQueue_,i,s)}function $v(t){return t.nextWriteId_++}function qv(t){Fd(t,"onDisconnectEvents");const e=Md(t),n=hr();Ys(t.onDisconnect_,B(),(r,s)=>{const o=Sv(r,s,t.serverSyncTree_,e);ld(n,r,o)});let i=[];Ys(n,B(),(r,s)=>{i=i.concat(Zr(t.serverSyncTree_,r,s));const o=Qv(t,r);ra(t,o)}),t.onDisconnect_=hr(),Qt(t.eventQueue_,B(),i)}function Uv(t,e,n){let i;M(e._path)===".info"?i=Ul(t.infoSyncTree_,e,n):i=Ul(t.serverSyncTree_,e,n),Rd(t.eventQueue_,e._path,i)}function Xl(t,e,n){let i;M(e._path)===".info"?i=Zs(t.infoSyncTree_,e,n):i=Zs(t.serverSyncTree_,e,n),Rd(t.eventQueue_,e._path,i)}function Yv(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Bv)}function Fd(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),le(n,...e)}function Bd(t,e,n){return Ed(t.serverSyncTree_,e,n)||x.EMPTY_NODE}function ia(t,e=t.transactionQueueTree_){if(e||ns(t,e),Tn(e)){const n=Vd(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&Kv(t,Ii(e),n)}else xd(e)&&ts(e,n=>{ia(t,n)})}function Kv(t,e,n){const i=n.map(c=>c.currentWriteId),r=Bd(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const u=n[c];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=he(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Fd(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(rn(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();ns(t,ea(t.transactionQueueTree_,e)),ia(t,t.transactionQueueTree_),Qt(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Ei(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ve("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}ra(t,e)}},o)}function ra(t,e){const n=Hd(t,e),i=Ii(n),r=Vd(t,n);return Gv(t,r,i),i}function Gv(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=he(n,l.path);let u=!1,d;if(m(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,r=r.concat(rn(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Hv)u=!0,d="maxretry",r=r.concat(rn(t.serverSyncTree_,l.currentWriteId,!0));else{const h=Bd(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){ta("transaction failed: Data returned ",f,l.path);let p=ce(f);typeof f=="object"&&f!=null&&$e(f,".priority")||(p=p.updatePriority(h.getPriority()));const _=l.currentWriteId,C=Md(t),O=xv(p,h,C);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=O,l.currentWriteId=$v(t),o.splice(o.indexOf(_),1),r=r.concat(fv(t.serverSyncTree_,l.path,O,l.currentWriteId,l.applyLocally)),r=r.concat(rn(t.serverSyncTree_,_,!0))}else u=!0,d="nodata",r=r.concat(rn(t.serverSyncTree_,l.currentWriteId,!0))}Qt(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}ns(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Ei(i[a]);ia(t,t.transactionQueueTree_)}function Hd(t,e){let n,i=t.transactionQueueTree_;for(n=M(e);n!==null&&Tn(i)===void 0;)i=ea(i,n),e=U(e),n=M(e);return i}function Vd(t,e){const n=[];return Wd(t,e,n),n.sort((i,r)=>i.order-r.order),n}function Wd(t,e,n){const i=Tn(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);ts(e,r=>{Wd(t,r,n)})}function ns(t,e){const n=Tn(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Sd(e,n.length>0?n:void 0)}ts(e,i=>{ns(t,i)})}function Qv(t,e){const n=Ii(Hd(t,e)),i=ea(t.transactionQueueTree_,e);return Dv(i,r=>{vs(t,r)}),vs(t,i),Td(i,r=>{vs(t,r)}),n}function vs(t,e){const n=Tn(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(m(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(rn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Sd(e,void 0):n.length=s+1,Qt(t.eventQueue_,Ii(e),r);for(let o=0;o<i.length;o++)Ei(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function Jv(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ve(`Invalid query segment '${n}' in query '${t}'`)}return e}const Jl=function(t,e){const n=Zv(t),i=n.namespace;n.domain==="firebase.com"&&Xe(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Xe("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||u_();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Wu(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new z(n.pathString)}},Zv=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=Xv(t.substring(u,d)));const h=Jv(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+re(this.snapshot.exportVal())}}class ty{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return F(this._path)?null:Qu(this._path)}get ref(){return new Et(this._repo,this._path)}get _queryIdentifier(){const e=Rl(this._queryParams),n=Oo(e);return n==="{}"?"default":n}get _queryObject(){return Rl(this._queryParams)}isEqual(e){if(e=yi(e),!(e instanceof Dn))return!1;const n=this._repo===e._repo,i=Po(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Y_(this._path)}}function iy(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function sa(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ft){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Wt)throw new Error(i);if(typeof e!="string")throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==vt)throw new Error(i);if(typeof n!="string")throw new Error(r)}}else if(t.getIndex()===G){if(e!=null&&!Kl(e)||n!=null&&!Kl(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(m(t.getIndex()instanceof sd||t.getIndex()===od,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jd(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Et extends Dn{constructor(e,n){super(e,n,new Ho,!1)}get parent(){const e=Ju(this._path);return e===null?null:new Et(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class wr{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new z(e),i=to(this.ref,e);return new wr(this._node.getChild(n),i,G)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new wr(r,to(this.ref,i),G)))}hasChild(e){const n=new z(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ry(t,e){return t=yi(t),t._checkNotDeleted("ref"),to(t._root,e)}function to(t,e){return t=yi(t),M(t._path)===null?Rv("child","path",e):Ld("child","path",e),new Et(t._repo,te(t._path,e))}class oa{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new ey("value",this,new wr(e.snapshotNode,new Et(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ty(this,e,n):null}matches(e){return e instanceof oa?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function sy(t,e,n,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){const l=n,c=(u,d)=>{Xl(t._repo,t,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new ny(n,s||void 0),a=new oa(o);return Uv(t._repo,t,a),()=>Xl(t._repo,t,a)}function oy(t,e,n,i){return sy(t,"value",e,n,i)}class aa{}class ay extends aa{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Od("endAt",this._value,e._path);const n=_m(e._queryParams,this._value,this._key);if(jd(n),sa(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Dn(e._repo,e._path,n,e._orderByCalled)}}function ly(t,e){return new ay(t,e)}class cy extends aa{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Od("startAt",this._value,e._path);const n=gm(e._queryParams,this._value,this._key);if(jd(n),sa(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Dn(e._repo,e._path,n,e._orderByCalled)}}function uy(t=null,e){return new cy(t,e)}class dy extends aa{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){iy(e,"orderByKey");const n=mm(e._queryParams,ft);return sa(n),new Dn(e._repo,e._path,n,!0)}}function hy(){return new dy}function fy(t,...e){let n=yi(t);for(const i of e)n=i._apply(n);return n}rv(Et);uv(Et);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="FIREBASE_DATABASE_EMULATOR_HOST",no={};let gy=!1;function _y(t,e,n,i){t.repoInfo_=new Wu(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function my(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||Xe("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),le("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Jl(s,r),a=o.repoInfo,l;typeof process<"u"&&_l&&(l=_l[py]),l?(s=`http://${l}?ns=${a.namespace}`,o=Jl(s,r),a=o.repoInfo):o.repoInfo.secure;const c=new b_(t.name,t.options,e);Pv("Invalid Firebase Database URL",o),F(o.path)||Xe("Database URL must point to the root of a Firebase Database (not including a child path).");const u=yy(a,t,c,new w_(t.name,n));return new wy(u,t)}function vy(t,e){const n=no[e];(!n||n[t.key]!==t)&&Xe(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Yv(t),delete n[t.key]}function yy(t,e,n,i){let r=no[e.name];r||(r={},no[e.name]=r);let s=r[t.toURLString()];return s&&Xe("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Vv(t,gy,n,i),r[t.toURLString()]=s,s}class wy{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Wv(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Et(this._repo,B())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vy(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Xe("Cannot call "+e+" on a deleted database.")}}function by(t=Ug(),e){const n=jg(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Np("database");i&&Ey(n,...i)}return n}function Ey(t,e,n,i={}){t=yi(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Xe("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Xe('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Qi(Qi.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:Rp(i.mockUserToken,t.app.options.projectId);s=new Qi(o)}_y(r,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){r_(qg),ar(new ri("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return my(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),ln(ml,vl,t),ln(ml,vl,"esm2017")}Ge.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ge.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Cy();const ky={apiKey:"AIzaSyA9L9tZI7pknpqklKVIkjBk_EfbDmE75Ng",authDomain:"glossary-lawyer.firebaseapp.com",projectId:"glossary-lawyer",storageBucket:"glossary-lawyer.appspot.com",messagingSenderId:"738810528587",appId:"1:738810528587:web:8deeed3f6c4beea1cb9ece",measurementId:"G-ZYQ31X693L"};let io;hl().length?io=hl()[0]:io=ku(ky);const Iy=by(io);var Sy=function(){function t(e,n){n===void 0&&(n=[]),this._eventType=e,this._eventFunctions=n}return t.prototype.init=function(){var e=this;this._eventFunctions.forEach(function(n){typeof window<"u"&&window.addEventListener(e._eventType,n)})},t}(),xy=function(){function t(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return t.prototype.addInstance=function(e,n,i,r){if(r===void 0&&(r=!1),!this._instances[e])return console.warn("Flowbite: Component ".concat(e," does not exist.")),!1;if(this._instances[e][i]&&!r){console.warn("Flowbite: Instance with ID ".concat(i," already exists."));return}r&&this._instances[e][i]&&this._instances[e][i].destroyAndRemoveInstance(),this._instances[e][i||this._generateRandomId()]=n},t.prototype.getAllInstances=function(){return this._instances},t.prototype.getInstances=function(e){return this._instances[e]?this._instances[e]:(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},t.prototype.getInstance=function(e,n){if(this._componentAndInstanceCheck(e,n)){if(!this._instances[e][n]){console.warn("Flowbite: Instance with ID ".concat(n," does not exist."));return}return this._instances[e][n]}},t.prototype.destroyAndRemoveInstance=function(e,n){this._componentAndInstanceCheck(e,n)&&(this.destroyInstanceObject(e,n),this.removeInstance(e,n))},t.prototype.removeInstance=function(e,n){this._componentAndInstanceCheck(e,n)&&delete this._instances[e][n]},t.prototype.destroyInstanceObject=function(e,n){this._componentAndInstanceCheck(e,n)&&this._instances[e][n].destroy()},t.prototype.instanceExists=function(e,n){return!(!this._instances[e]||!this._instances[e][n])},t.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},t.prototype._componentAndInstanceCheck=function(e,n){return this._instances[e]?this._instances[e][n]?!0:(console.warn("Flowbite: Instance with ID ".concat(n," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},t}(),N=new xy;typeof window<"u"&&(window.FlowbiteInstances=N);var br=function(){return br=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},br.apply(this,arguments)},Er={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},Ty={id:null,override:!0},zd=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=[]),i===void 0&&(i=Er),r===void 0&&(r=Ty),this._instanceId=r.id?r.id:e.id,this._accordionEl=e,this._items=n,this._options=br(br({},Er),i),this._initialized=!1,this.init(),N.addInstance("Accordion",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.forEach(function(n){n.active&&e.open(n.id);var i=function(){e.toggle(n.id)};n.triggerEl.addEventListener("click",i),n.clickHandler=i}),this._initialized=!0)},t.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(e){e.triggerEl.removeEventListener("click",e.clickHandler),delete e.clickHandler}),this._initialized=!1)},t.prototype.removeInstance=function(){N.removeInstance("Accordion",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(e){return this._items.filter(function(n){return n.id===e})[0]},t.prototype.open=function(e){var n,i,r=this,s=this.getItem(e);this._options.alwaysOpen||this._items.map(function(o){var a,l;o!==s&&((a=o.triggerEl.classList).remove.apply(a,r._options.activeClasses.split(" ")),(l=o.triggerEl.classList).add.apply(l,r._options.inactiveClasses.split(" ")),o.targetEl.classList.add("hidden"),o.triggerEl.setAttribute("aria-expanded","false"),o.active=!1,o.iconEl&&o.iconEl.classList.add("rotate-180"))}),(n=s.triggerEl.classList).add.apply(n,this._options.activeClasses.split(" ")),(i=s.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),s.triggerEl.setAttribute("aria-expanded","true"),s.targetEl.classList.remove("hidden"),s.active=!0,s.iconEl&&s.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,s)},t.prototype.toggle=function(e){var n=this.getItem(e);n.active?this.close(e):this.open(e),this._options.onToggle(this,n)},t.prototype.close=function(e){var n,i,r=this.getItem(e);(n=r.triggerEl.classList).remove.apply(n,this._options.activeClasses.split(" ")),(i=r.triggerEl.classList).add.apply(i,this._options.inactiveClasses.split(" ")),r.targetEl.classList.add("hidden"),r.triggerEl.setAttribute("aria-expanded","false"),r.active=!1,r.iconEl&&r.iconEl.classList.add("rotate-180"),this._options.onClose(this,r)},t.prototype.updateOnOpen=function(e){this._options.onOpen=e},t.prototype.updateOnClose=function(e){this._options.onClose=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function la(){document.querySelectorAll("[data-accordion]").forEach(function(t){var e=t.getAttribute("data-accordion"),n=t.getAttribute("data-active-classes"),i=t.getAttribute("data-inactive-classes"),r=[];t.querySelectorAll("[data-accordion-target]").forEach(function(s){if(s.closest("[data-accordion]")===t){var o={id:s.getAttribute("data-accordion-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-accordion-target")),iconEl:s.querySelector("[data-accordion-icon]"),active:s.getAttribute("aria-expanded")==="true"};r.push(o)}}),new zd(t,r,{alwaysOpen:e==="open",activeClasses:n||Er.activeClasses,inactiveClasses:i||Er.inactiveClasses})})}typeof window<"u"&&(window.Accordion=zd,window.initAccordions=la);var Cr=function(){return Cr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Cr.apply(this,arguments)},Zl={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},Dy={id:null,override:!0},ro=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=Zl),r===void 0&&(r=Dy),this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=Cr(Cr({},Zl),i),this._visible=!1,this._initialized=!1,this.init(),N.addInstance("Collapse",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){e.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){N.removeInstance("Collapse",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},t.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},t.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},t.prototype.updateOnCollapse=function(e){this._options.onCollapse=e},t.prototype.updateOnExpand=function(e){this._options.onExpand=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function ca(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(t){var e=t.getAttribute("data-collapse-toggle"),n=document.getElementById(e);n?N.instanceExists("Collapse",n.getAttribute("id"))?new ro(n,t,{},{id:n.getAttribute("id")+"_"+N._generateRandomId()}):new ro(n,t):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=ro,window.initCollapses=ca);var Ot=function(){return Ot=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ot.apply(this,arguments)},Xi={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},Ay={id:null,override:!0},$d=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=[]),i===void 0&&(i=Xi),r===void 0&&(r=Ay),this._instanceId=r.id?r.id:e.id,this._carouselEl=e,this._items=n,this._options=Ot(Ot(Ot({},Xi),i),{indicators:Ot(Ot({},Xi.indicators),i.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),N.addInstance("Carousel",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.map(function(n){n.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(n,i){n.el.addEventListener("click",function(){e.slideTo(i)})}),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){N.removeInstance("Carousel",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(e){return this._items[e]},t.prototype.slideTo=function(e){var n=this._items[e],i={left:n.position===0?this._items[this._items.length-1]:this._items[n.position-1],middle:n,right:n.position===this._items.length-1?this._items[0]:this._items[n.position+1]};this._rotate(i),this._setActiveItem(n),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},t.prototype.next=function(){var e=this.getActiveItem(),n=null;e.position===this._items.length-1?n=this._items[0]:n=this._items[e.position+1],this.slideTo(n.position),this._options.onNext(this)},t.prototype.prev=function(){var e=this.getActiveItem(),n=null;e.position===0?n=this._items[this._items.length-1]:n=this._items[e.position-1],this.slideTo(n.position),this._options.onPrev(this)},t.prototype._rotate=function(e){if(this._items.map(function(n){n.el.classList.add("hidden")}),this._items.length===1){e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-20");return}e.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.left.el.classList.add("-translate-x-full","z-10"),e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-30"),e.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),e.right.el.classList.add("translate-x-full","z-20")},t.prototype.cycle=function(){var e=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){e.next()},this._intervalDuration))},t.prototype.pause=function(){clearInterval(this._intervalInstance)},t.prototype.getActiveItem=function(){return this._activeItem},t.prototype._setActiveItem=function(e){var n,i,r=this;this._activeItem=e;var s=e.position;this._indicators.length&&(this._indicators.map(function(o){var a,l;o.el.setAttribute("aria-current","false"),(a=o.el.classList).remove.apply(a,r._options.indicators.activeClasses.split(" ")),(l=o.el.classList).add.apply(l,r._options.indicators.inactiveClasses.split(" "))}),(n=this._indicators[s].el.classList).add.apply(n,this._options.indicators.activeClasses.split(" ")),(i=this._indicators[s].el.classList).remove.apply(i,this._options.indicators.inactiveClasses.split(" ")),this._indicators[s].el.setAttribute("aria-current","true"))},t.prototype.updateOnNext=function(e){this._options.onNext=e},t.prototype.updateOnPrev=function(e){this._options.onPrev=e},t.prototype.updateOnChange=function(e){this._options.onChange=e},t}();function ua(){document.querySelectorAll("[data-carousel]").forEach(function(t){var e=t.getAttribute("data-carousel-interval"),n=t.getAttribute("data-carousel")==="slide",i=[],r=0;t.querySelectorAll("[data-carousel-item]").length&&Array.from(t.querySelectorAll("[data-carousel-item]")).map(function(c,u){i.push({position:u,el:c}),c.getAttribute("data-carousel-item")==="active"&&(r=u)});var s=[];t.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(t.querySelectorAll("[data-carousel-slide-to]")).map(function(c){s.push({position:parseInt(c.getAttribute("data-carousel-slide-to")),el:c})});var o=new $d(t,i,{defaultPosition:r,indicators:{items:s},interval:e||Xi.interval});n&&o.cycle();var a=t.querySelector("[data-carousel-next]"),l=t.querySelector("[data-carousel-prev]");a&&a.addEventListener("click",function(){o.next()}),l&&l.addEventListener("click",function(){o.prev()})})}typeof window<"u"&&(window.Carousel=$d,window.initCarousels=ua);var kr=function(){return kr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},kr.apply(this,arguments)},ec={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},Oy={id:null,override:!0},qd=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=ec),r===void 0&&(r=Oy),this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=kr(kr({},ec),i),this._initialized=!1,this.init(),N.addInstance("Dismiss",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){e.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){N.removeInstance("Dismiss",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var e=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){e._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},t.prototype.updateOnHide=function(e){this._options.onHide=e},t}();function da(){document.querySelectorAll("[data-dismiss-target]").forEach(function(t){var e=t.getAttribute("data-dismiss-target"),n=document.querySelector(e);n?new qd(n,t):console.error('The dismiss element with id "'.concat(e,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=qd,window.initDismisses=da);var ge="top",Te="bottom",De="right",_e="left",ha="auto",Si=[ge,Te,De,_e],wn="start",fi="end",Ly="clippingParents",Ud="viewport",Mn="popper",Ny="reference",tc=Si.reduce(function(t,e){return t.concat([e+"-"+wn,e+"-"+fi])},[]),Yd=[].concat(Si,[ha]).reduce(function(t,e){return t.concat([e,e+"-"+wn,e+"-"+fi])},[]),Ry="beforeRead",Py="read",My="afterRead",Fy="beforeMain",By="main",Hy="afterMain",Vy="beforeWrite",Wy="write",jy="afterWrite",zy=[Ry,Py,My,Fy,By,Hy,Vy,Wy,jy];function ze(t){return t?(t.nodeName||"").toLowerCase():null}function be(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function qt(t){var e=be(t).Element;return t instanceof e||t instanceof Element}function Se(t){var e=be(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function fa(t){if(typeof ShadowRoot>"u")return!1;var e=be(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function $y(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Se(s)||!ze(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function qy(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Se(r)||!ze(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const Uy={name:"applyStyles",enabled:!0,phase:"write",fn:$y,effect:qy,requires:["computeStyles"]};function We(t){return t.split("-")[0]}var Ft=Math.max,Ir=Math.min,bn=Math.round;function so(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Kd(){return!/^((?!chrome|android).)*safari/i.test(so())}function En(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&Se(t)&&(r=t.offsetWidth>0&&bn(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&bn(i.height)/t.offsetHeight||1);var o=qt(t)?be(t):window,a=o.visualViewport,l=!Kd()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function pa(t){var e=En(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Gd(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fa(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Je(t){return be(t).getComputedStyle(t)}function Yy(t){return["table","td","th"].indexOf(ze(t))>=0}function Ct(t){return((qt(t)?t.ownerDocument:t.document)||window.document).documentElement}function is(t){return ze(t)==="html"?t:t.assignedSlot||t.parentNode||(fa(t)?t.host:null)||Ct(t)}function nc(t){return!Se(t)||Je(t).position==="fixed"?null:t.offsetParent}function Ky(t){var e=/firefox/i.test(so()),n=/Trident/i.test(so());if(n&&Se(t)){var i=Je(t);if(i.position==="fixed")return null}var r=is(t);for(fa(r)&&(r=r.host);Se(r)&&["html","body"].indexOf(ze(r))<0;){var s=Je(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function xi(t){for(var e=be(t),n=nc(t);n&&Yy(n)&&Je(n).position==="static";)n=nc(n);return n&&(ze(n)==="html"||ze(n)==="body"&&Je(n).position==="static")?e:n||Ky(t)||e}function ga(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Un(t,e,n){return Ft(t,Ir(e,n))}function Gy(t,e,n){var i=Un(t,e,n);return i>n?n:i}function Qd(){return{top:0,right:0,bottom:0,left:0}}function Xd(t){return Object.assign({},Qd(),t)}function Jd(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var Qy=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Xd(typeof e!="number"?e:Jd(e,Si))};function Xy(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=We(n.placement),l=ga(a),c=[_e,De].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=Qy(r.padding,n),h=pa(s),f=l==="y"?ge:_e,p=l==="y"?Te:De,g=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],_=o[l]-n.rects.reference[l],C=xi(s),O=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,T=g/2-_/2,b=d[f],w=O-h[u]-d[p],E=O/2-h[u]/2+T,L=Un(b,E,w),I=l;n.modifiersData[i]=(e={},e[I]=L,e.centerOffset=L-E,e)}}function Jy(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||Gd(e.elements.popper,r)&&(e.elements.arrow=r))}const Zy={name:"arrow",enabled:!0,phase:"main",fn:Xy,effect:Jy,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cn(t){return t.split("-")[1]}var ew={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tw(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:bn(n*r)/r||0,y:bn(i*r)/r||0}}function ic(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,g=p===void 0?0:p,_=typeof u=="function"?u({x:f,y:g}):{x:f,y:g};f=_.x,g=_.y;var C=o.hasOwnProperty("x"),O=o.hasOwnProperty("y"),T=_e,b=ge,w=window;if(c){var E=xi(n),L="clientHeight",I="clientWidth";if(E===be(n)&&(E=Ct(n),Je(E).position!=="static"&&a==="absolute"&&(L="scrollHeight",I="scrollWidth")),E=E,r===ge||(r===_e||r===De)&&s===fi){b=Te;var D=d&&E===w&&w.visualViewport?w.visualViewport.height:E[L];g-=D-i.height,g*=l?1:-1}if(r===_e||(r===ge||r===Te)&&s===fi){T=De;var A=d&&E===w&&w.visualViewport?w.visualViewport.width:E[I];f-=A-i.width,f*=l?1:-1}}var y=Object.assign({position:a},c&&ew),v=u===!0?tw({x:f,y:g},be(n)):{x:f,y:g};if(f=v.x,g=v.y,l){var S;return Object.assign({},y,(S={},S[b]=O?"0":"",S[T]=C?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",S))}return Object.assign({},y,(e={},e[b]=O?g+"px":"",e[T]=C?f+"px":"",e.transform="",e))}function nw(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:We(e.placement),variation:Cn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ic(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ic(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const iw={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:nw,data:{}};var Vi={passive:!0};function rw(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=be(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Vi)}),a&&l.addEventListener("resize",n.update,Vi),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Vi)}),a&&l.removeEventListener("resize",n.update,Vi)}}const sw={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:rw,data:{}};var ow={left:"right",right:"left",bottom:"top",top:"bottom"};function Ji(t){return t.replace(/left|right|bottom|top/g,function(e){return ow[e]})}var aw={start:"end",end:"start"};function rc(t){return t.replace(/start|end/g,function(e){return aw[e]})}function _a(t){var e=be(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function ma(t){return En(Ct(t)).left+_a(t).scrollLeft}function lw(t,e){var n=be(t),i=Ct(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=Kd();(c||!c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+ma(t),y:l}}function cw(t){var e,n=Ct(t),i=_a(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=Ft(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Ft(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+ma(t),l=-i.scrollTop;return Je(r||n).direction==="rtl"&&(a+=Ft(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function va(t){var e=Je(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Zd(t){return["html","body","#document"].indexOf(ze(t))>=0?t.ownerDocument.body:Se(t)&&va(t)?t:Zd(is(t))}function Yn(t,e){var n;e===void 0&&(e=[]);var i=Zd(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=be(i),o=r?[s].concat(s.visualViewport||[],va(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Yn(is(o)))}function oo(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function uw(t,e){var n=En(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function sc(t,e,n){return e===Ud?oo(lw(t,n)):qt(e)?uw(e,n):oo(cw(Ct(t)))}function dw(t){var e=Yn(is(t)),n=["absolute","fixed"].indexOf(Je(t).position)>=0,i=n&&Se(t)?xi(t):t;return qt(i)?e.filter(function(r){return qt(r)&&Gd(r,i)&&ze(r)!=="body"}):[]}function hw(t,e,n,i){var r=e==="clippingParents"?dw(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(l,c){var u=sc(t,c,i);return l.top=Ft(u.top,l.top),l.right=Ir(u.right,l.right),l.bottom=Ir(u.bottom,l.bottom),l.left=Ft(u.left,l.left),l},sc(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function eh(t){var e=t.reference,n=t.element,i=t.placement,r=i?We(i):null,s=i?Cn(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case ge:l={x:o,y:e.y-n.height};break;case Te:l={x:o,y:e.y+e.height};break;case De:l={x:e.x+e.width,y:a};break;case _e:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?ga(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case wn:l[c]=l[c]-(e[u]/2-n[u]/2);break;case fi:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function pi(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Ly:a,c=n.rootBoundary,u=c===void 0?Ud:c,d=n.elementContext,h=d===void 0?Mn:d,f=n.altBoundary,p=f===void 0?!1:f,g=n.padding,_=g===void 0?0:g,C=Xd(typeof _!="number"?_:Jd(_,Si)),O=h===Mn?Ny:Mn,T=t.rects.popper,b=t.elements[p?O:h],w=hw(qt(b)?b:b.contextElement||Ct(t.elements.popper),l,u,o),E=En(t.elements.reference),L=eh({reference:E,element:T,strategy:"absolute",placement:r}),I=oo(Object.assign({},T,L)),D=h===Mn?I:E,A={top:w.top-D.top+C.top,bottom:D.bottom-w.bottom+C.bottom,left:w.left-D.left+C.left,right:D.right-w.right+C.right},y=t.modifiersData.offset;if(h===Mn&&y){var v=y[r];Object.keys(A).forEach(function(S){var k=[De,Te].indexOf(S)>=0?1:-1,R=[ge,Te].indexOf(S)>=0?"y":"x";A[S]+=v[R]*k})}return A}function fw(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Yd:l,u=Cn(i),d=u?a?tc:tc.filter(function(p){return Cn(p)===u}):Si,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,g){return p[g]=pi(t,{placement:g,boundary:r,rootBoundary:s,padding:o})[We(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}function pw(t){if(We(t)===ha)return[];var e=Ji(t);return[rc(t),e,rc(e)]}function gw(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,g=n.allowedAutoPlacements,_=e.options.placement,C=We(_),O=C===_,T=l||(O||!p?[Ji(_)]:pw(_)),b=[_].concat(T).reduce(function(Z,ee){return Z.concat(We(ee)===ha?fw(e,{placement:ee,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):ee)},[]),w=e.rects.reference,E=e.rects.popper,L=new Map,I=!0,D=b[0],A=0;A<b.length;A++){var y=b[A],v=We(y),S=Cn(y)===wn,k=[ge,Te].indexOf(v)>=0,R=k?"width":"height",W=pi(e,{placement:y,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),K=k?S?De:_e:S?Te:ge;w[R]>E[R]&&(K=Ji(K));var Ee=Ji(K),ue=[];if(s&&ue.push(W[v]<=0),a&&ue.push(W[K]<=0,W[Ee]<=0),ue.every(function(Z){return Z})){D=y,I=!1;break}L.set(y,ue)}if(I)for(var qe=p?3:1,kt=function(ee){var oe=b.find(function(Q){var j=L.get(Q);if(j)return j.slice(0,ee).every(function(se){return se})});if(oe)return D=oe,"break"},Ae=qe;Ae>0;Ae--){var de=kt(Ae);if(de==="break")break}e.placement!==D&&(e.modifiersData[i]._skip=!0,e.placement=D,e.reset=!0)}}const _w={name:"flip",enabled:!0,phase:"main",fn:gw,requiresIfExists:["offset"],data:{_skip:!1}};function oc(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ac(t){return[ge,De,Te,_e].some(function(e){return t[e]>=0})}function mw(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=pi(e,{elementContext:"reference"}),a=pi(e,{altBoundary:!0}),l=oc(o,i),c=oc(a,r,s),u=ac(l),d=ac(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const vw={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mw};function yw(t,e,n){var i=We(t),r=[_e,ge].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[_e,De].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function ww(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=Yd.reduce(function(u,d){return u[d]=yw(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}const bw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ww};function Ew(t){var e=t.state,n=t.name;e.modifiersData[n]=eh({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Cw={name:"popperOffsets",enabled:!0,phase:"read",fn:Ew,data:{}};function kw(t){return t==="x"?"y":"x"}function Iw(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,_=pi(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),C=We(e.placement),O=Cn(e.placement),T=!O,b=ga(C),w=kw(b),E=e.modifiersData.popperOffsets,L=e.rects.reference,I=e.rects.popper,D=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,A=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),y=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,v={x:0,y:0};if(E){if(s){var S,k=b==="y"?ge:_e,R=b==="y"?Te:De,W=b==="y"?"height":"width",K=E[b],Ee=K+_[k],ue=K-_[R],qe=f?-I[W]/2:0,kt=O===wn?L[W]:I[W],Ae=O===wn?-I[W]:-L[W],de=e.elements.arrow,Z=f&&de?pa(de):{width:0,height:0},ee=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Qd(),oe=ee[k],Q=ee[R],j=Un(0,L[W],Z[W]),se=T?L[W]/2-qe-j-oe-A.mainAxis:kt-j-oe-A.mainAxis,He=T?-L[W]/2+qe+j+Q+A.mainAxis:Ae+j+Q+A.mainAxis,Ce=e.elements.arrow&&xi(e.elements.arrow),Oe=Ce?b==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,$=(S=y==null?void 0:y[b])!=null?S:0,H=K+se-$-Oe,ae=K+He-$,Le=Un(f?Ir(Ee,H):Ee,K,f?Ft(ue,ae):ue);E[b]=Le,v[b]=Le-K}if(a){var An,xh=b==="x"?ge:_e,Th=b==="x"?Te:De,It=E[w],Ai=w==="y"?"height":"width",Fa=It+_[xh],Ba=It-_[Th],rs=[ge,_e].indexOf(C)!==-1,Ha=(An=y==null?void 0:y[w])!=null?An:0,Va=rs?Fa:It-L[Ai]-I[Ai]-Ha+A.altAxis,Wa=rs?It+L[Ai]+I[Ai]-Ha-A.altAxis:Ba,ja=f&&rs?Gy(Va,It,Wa):Un(f?Va:Fa,It,f?Wa:Ba);E[w]=ja,v[w]=ja-It}e.modifiersData[i]=v}}const Sw={name:"preventOverflow",enabled:!0,phase:"main",fn:Iw,requiresIfExists:["offset"]};function xw(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Tw(t){return t===be(t)||!Se(t)?_a(t):xw(t)}function Dw(t){var e=t.getBoundingClientRect(),n=bn(e.width)/t.offsetWidth||1,i=bn(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Aw(t,e,n){n===void 0&&(n=!1);var i=Se(e),r=Se(e)&&Dw(e),s=Ct(e),o=En(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((ze(e)!=="body"||va(s))&&(a=Tw(e)),Se(e)?(l=En(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=ma(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Ow(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function Lw(t){var e=Ow(t);return zy.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Nw(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Rw(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var lc={placement:"bottom",modifiers:[],strategy:"absolute"};function cc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Pw(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?lc:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},lc,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(C){var O=typeof C=="function"?C(u.options):C;g(),u.options=Object.assign({},s,u.options,O),u.scrollParents={reference:qt(a)?Yn(a):a.contextElement?Yn(a.contextElement):[],popper:Yn(l)};var T=Lw(Rw([].concat(i,u.options.modifiers)));return u.orderedModifiers=T.filter(function(b){return b.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var C=u.elements,O=C.reference,T=C.popper;if(cc(O,T)){u.rects={reference:Aw(O,xi(T),u.options.strategy==="fixed"),popper:pa(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(A){return u.modifiersData[A.name]=Object.assign({},A.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var w=u.orderedModifiers[b],E=w.fn,L=w.options,I=L===void 0?{}:L,D=w.name;typeof E=="function"&&(u=E({state:u,options:I,name:D,instance:f})||u)}}}},update:Nw(function(){return new Promise(function(_){f.forceUpdate(),_(u)})}),destroy:function(){g(),h=!0}};if(!cc(a,l))return f;f.setOptions(c).then(function(_){!h&&c.onFirstUpdate&&c.onFirstUpdate(_)});function p(){u.orderedModifiers.forEach(function(_){var C=_.name,O=_.options,T=O===void 0?{}:O,b=_.effect;if(typeof b=="function"){var w=b({state:u,name:C,instance:f,options:T}),E=function(){};d.push(w||E)}})}function g(){d.forEach(function(_){return _()}),d=[]}return f}}var Mw=[sw,Cw,iw,Uy,bw,_w,Sw,Zy,vw],ya=Pw({defaultModifiers:Mw}),it=function(){return it=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},it.apply(this,arguments)},Wi=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},rt={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},Fw={id:null,override:!0},th=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=rt),r===void 0&&(r=Fw),this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=it(it({},rt),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),N.addInstance("Dropdown",this,this._instanceId,r.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},t.prototype.destroy=function(){var e=this,n=this._getTriggerEvents();this._options.triggerType==="click"&&n.showEvents.forEach(function(i){e._triggerEl.removeEventListener(i,e._clickHandler)}),this._options.triggerType==="hover"&&(n.showEvents.forEach(function(i){e._triggerEl.removeEventListener(i,e._hoverShowTriggerElHandler),e._targetEl.removeEventListener(i,e._hoverShowTargetElHandler)}),n.hideEvents.forEach(function(i){e._triggerEl.removeEventListener(i,e._hoverHideHandler),e._targetEl.removeEventListener(i,e._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},t.prototype.removeInstance=function(){N.removeInstance("Dropdown",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._clickHandler=function(){e.toggle()},this._options.triggerType==="click"&&n.showEvents.forEach(function(i){e._triggerEl.addEventListener(i,e._clickHandler)}),this._hoverShowTriggerElHandler=function(i){i.type==="click"?e.toggle():setTimeout(function(){e.show()},e._options.delay)},this._hoverShowTargetElHandler=function(){e.show()},this._hoverHideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},e._options.delay)},this._options.triggerType==="hover"&&(n.showEvents.forEach(function(i){e._triggerEl.addEventListener(i,e._hoverShowTriggerElHandler),e._targetEl.addEventListener(i,e._hoverShowTargetElHandler)}),n.hideEvents.forEach(function(i){e._triggerEl.addEventListener(i,e._hoverHideHandler),e._targetEl.addEventListener(i,e._hoverHideHandler)}))},t.prototype._createPopperInstance=function(){return ya(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var i=e.target,r=this._options.ignoreClickOutsideClass,s=!1;if(r){var o=document.querySelectorAll(".".concat(r));o.forEach(function(a){if(a.contains(i)){s=!0;return}})}i!==n&&!n.contains(i)&&!this._triggerEl.contains(i)&&!s&&this.isVisible()&&this.hide()},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.isVisible=function(){return this._visible},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(e){return it(it({},e),{modifiers:Wi(Wi([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(e){return it(it({},e),{modifiers:Wi(Wi([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function wa(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(t){var e=t.getAttribute("data-dropdown-toggle"),n=document.getElementById(e);if(n){var i=t.getAttribute("data-dropdown-placement"),r=t.getAttribute("data-dropdown-offset-skidding"),s=t.getAttribute("data-dropdown-offset-distance"),o=t.getAttribute("data-dropdown-trigger"),a=t.getAttribute("data-dropdown-delay"),l=t.getAttribute("data-dropdown-ignore-click-outside-class");new th(n,t,{placement:i||rt.placement,triggerType:o||rt.triggerType,offsetSkidding:r?parseInt(r):rt.offsetSkidding,offsetDistance:s?parseInt(s):rt.offsetDistance,delay:a?parseInt(a):rt.delay,ignoreClickOutsideClass:l||rt.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(e,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=th,window.initDropdowns=wa);var Sr=function(){return Sr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Sr.apply(this,arguments)},xr={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},Bw={id:null,override:!0},nh=function(){function t(e,n,i){e===void 0&&(e=null),n===void 0&&(n=xr),i===void 0&&(i=Bw),this._eventListenerInstances=[],this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._options=Sr(Sr({},xr),n),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),N.addInstance("Modal",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(n){e._targetEl.classList.add(n)}),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},t.prototype.removeInstance=function(){N.removeInstance("Modal",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._createBackdrop=function(){var e;if(this._isHidden){var n=document.createElement("div");(e=n.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(n),this._backdropEl=n}},t.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},t.prototype._setupModalCloseEventListeners=function(){var e=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(n){e._handleOutsideClick(n.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(n){n.key==="Escape"&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._handleOutsideClick=function(e){(e===this._targetEl||e===this._backdropEl&&this.isVisible())&&this.hide()},t.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},t.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},t.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},t.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},t.prototype.isVisible=function(){return!this._isHidden},t.prototype.isHidden=function(){return this._isHidden},t.prototype.addEventListenerInstance=function(e,n,i){this._eventListenerInstances.push({element:e,type:n,handler:i})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function ba(){document.querySelectorAll("[data-modal-target]").forEach(function(t){var e=t.getAttribute("data-modal-target"),n=document.getElementById(e);if(n){var i=n.getAttribute("data-modal-placement"),r=n.getAttribute("data-modal-backdrop");new nh(n,{placement:i||xr.placement,backdrop:r||xr.backdrop})}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(t){var e=t.getAttribute("data-modal-toggle"),n=document.getElementById(e);if(n){var i=N.getInstance("Modal",e);if(i){var r=function(){i.toggle()};t.addEventListener("click",r),i.addEventListenerInstance(t,"click",r)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(t){var e=t.getAttribute("data-modal-show"),n=document.getElementById(e);if(n){var i=N.getInstance("Modal",e);if(i){var r=function(){i.show()};t.addEventListener("click",r),i.addEventListenerInstance(t,"click",r)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(t){var e=t.getAttribute("data-modal-hide"),n=document.getElementById(e);if(n){var i=N.getInstance("Modal",e);if(i){var r=function(){i.hide()};t.addEventListener("click",r),i.addEventListenerInstance(t,"click",r)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=nh,window.initModals=ba);var Tr=function(){return Tr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Tr.apply(this,arguments)},Lt={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},Hw={id:null,override:!0},ih=function(){function t(e,n,i){e===void 0&&(e=null),n===void 0&&(n=Lt),i===void 0&&(i=Hw),this._eventListenerInstances=[],this._instanceId=i.id?i.id:e.id,this._targetEl=e,this._options=Tr(Tr({},Lt),n),this._visible=!1,this._initialized=!1,this.init(),N.addInstance("Drawer",this,this._instanceId,i.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(n){e._targetEl.classList.add(n)}),this._handleEscapeKey=function(n){n.key==="Escape"&&e.isVisible()&&e.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},t.prototype.removeInstance=function(){N.removeInstance("Drawer",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(n){e._targetEl.classList.remove(n)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(n){e._targetEl.classList.add(n)})):(this._getPlacementClasses(this._options.placement).active.map(function(n){e._targetEl.classList.remove(n)}),this._getPlacementClasses(this._options.placement).inactive.map(function(n){e._targetEl.classList.add(n)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(n){e._targetEl.classList.add(n)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(n){e._targetEl.classList.remove(n)})):(this._getPlacementClasses(this._options.placement).active.map(function(n){e._targetEl.classList.add(n)}),this._getPlacementClasses(this._options.placement).inactive.map(function(n){e._targetEl.classList.remove(n)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype._createBackdrop=function(){var e,n=this;if(!this._visible){var i=document.createElement("div");i.setAttribute("drawer-backdrop",""),(e=i.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(i),i.addEventListener("click",function(){n.hide()})}},t.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},t.prototype._getPlacementClasses=function(e){switch(e){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype.addEventListenerInstance=function(e,n,i){this._eventListenerInstances.push({element:e,type:n,handler:i})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function Ea(){document.querySelectorAll("[data-drawer-target]").forEach(function(t){var e=t.getAttribute("data-drawer-target"),n=document.getElementById(e);if(n){var i=t.getAttribute("data-drawer-placement"),r=t.getAttribute("data-drawer-body-scrolling"),s=t.getAttribute("data-drawer-backdrop"),o=t.getAttribute("data-drawer-edge"),a=t.getAttribute("data-drawer-edge-offset");new ih(n,{placement:i||Lt.placement,bodyScrolling:r?r==="true":Lt.bodyScrolling,backdrop:s?s==="true":Lt.backdrop,edge:o?o==="true":Lt.edge,edgeOffset:a||Lt.edgeOffset})}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(t){var e=t.getAttribute("data-drawer-toggle"),n=document.getElementById(e);if(n){var i=N.getInstance("Drawer",e);if(i){var r=function(){i.toggle()};t.addEventListener("click",r),i.addEventListenerInstance(t,"click",r)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(t){var e=t.getAttribute("data-drawer-dismiss")?t.getAttribute("data-drawer-dismiss"):t.getAttribute("data-drawer-hide"),n=document.getElementById(e);if(n){var i=N.getInstance("Drawer",e);if(i){var r=function(){i.hide()};t.addEventListener("click",r),i.addEventListenerInstance(t,"click",r)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(t){var e=t.getAttribute("data-drawer-show"),n=document.getElementById(e);if(n){var i=N.getInstance("Drawer",e);if(i){var r=function(){i.show()};t.addEventListener("click",r),i.addEventListenerInstance(t,"click",r)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=ih,window.initDrawers=Ea);var Dr=function(){return Dr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Dr.apply(this,arguments)},Ar={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},Vw={id:null,override:!0},rh=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=[]),i===void 0&&(i=Ar),r===void 0&&(r=Vw),this._instanceId=r.id?r.id:e.id,this._tabsEl=e,this._items=n,this._activeTab=i?this.getTab(i.defaultTabId):null,this._options=Dr(Dr({},Ar),i),this._initialized=!1,this.init(),N.addInstance("Tabs",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(n){n.triggerEl.addEventListener("click",function(i){i.preventDefault(),e.show(n.id)})}))},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){this.destroy(),N.removeInstance("Tabs",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getActiveTab=function(){return this._activeTab},t.prototype.setActiveTab=function(e){this._activeTab=e},t.prototype.getTab=function(e){return this._items.filter(function(n){return n.id===e})[0]},t.prototype.show=function(e,n){var i,r,s=this;n===void 0&&(n=!1);var o=this.getTab(e);o===this._activeTab&&!n||(this._items.map(function(a){var l,c;a!==o&&((l=a.triggerEl.classList).remove.apply(l,s._options.activeClasses.split(" ")),(c=a.triggerEl.classList).add.apply(c,s._options.inactiveClasses.split(" ")),a.targetEl.classList.add("hidden"),a.triggerEl.setAttribute("aria-selected","false"))}),(i=o.triggerEl.classList).add.apply(i,this._options.activeClasses.split(" ")),(r=o.triggerEl.classList).remove.apply(r,this._options.inactiveClasses.split(" ")),o.triggerEl.setAttribute("aria-selected","true"),o.targetEl.classList.remove("hidden"),this.setActiveTab(o),this._options.onShow(this,o))},t.prototype.updateOnShow=function(e){this._options.onShow=e},t}();function Ca(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(t){var e=[],n=t.getAttribute("data-tabs-active-classes"),i=t.getAttribute("data-tabs-inactive-classes"),r=null;t.querySelectorAll('[role="tab"]').forEach(function(s){var o=s.getAttribute("aria-selected")==="true",a={id:s.getAttribute("data-tabs-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-tabs-target"))};e.push(a),o&&(r=a.id)}),new rh(t,e,{defaultTabId:r,activeClasses:n||Ar.activeClasses,inactiveClasses:i||Ar.inactiveClasses})})}typeof window<"u"&&(window.Tabs=rh,window.initTabs=Ca);var st=function(){return st=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},st.apply(this,arguments)},ji=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},Or={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Ww={id:null,override:!0},sh=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=Or),r===void 0&&(r=Ww),this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=st(st({},Or),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),N.addInstance("Tooltip",this,this._instanceId,r.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEvents();n.showEvents.forEach(function(i){e._triggerEl.removeEventListener(i,e._showHandler)}),n.hideEvents.forEach(function(i){e._triggerEl.removeEventListener(i,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){N.removeInstance("Tooltip",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){e.hide()},n.showEvents.forEach(function(i){e._triggerEl.addEventListener(i,e._showHandler)}),n.hideEvents.forEach(function(i){e._triggerEl.addEventListener(i,e._hideHandler)})},t.prototype._createPopperInstance=function(){return ya(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},t.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(n){n.key==="Escape"&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var i=e.target;i!==n&&!n.contains(i)&&!this._triggerEl.contains(i)&&this.isVisible()&&this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return st(st({},e),{modifiers:ji(ji([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return st(st({},e),{modifiers:ji(ji([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function ka(){document.querySelectorAll("[data-tooltip-target]").forEach(function(t){var e=t.getAttribute("data-tooltip-target"),n=document.getElementById(e);if(n){var i=t.getAttribute("data-tooltip-trigger"),r=t.getAttribute("data-tooltip-placement");new sh(n,t,{placement:r||Or.placement,triggerType:i||Or.triggerType})}else console.error('The tooltip element with id "'.concat(e,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=sh,window.initTooltips=ka);var ot=function(){return ot=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ot.apply(this,arguments)},zi=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},Kn={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},jw={id:null,override:!0},oh=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=Kn),r===void 0&&(r=jw),this._instanceId=r.id?r.id:e.id,this._targetEl=e,this._triggerEl=n,this._options=ot(ot({},Kn),i),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),N.addInstance("Popover",this,r.id?r.id:this._targetEl.id,r.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEvents();n.showEvents.forEach(function(i){e._triggerEl.removeEventListener(i,e._showHandler),e._targetEl.removeEventListener(i,e._showHandler)}),n.hideEvents.forEach(function(i){e._triggerEl.removeEventListener(i,e._hideHandler),e._targetEl.removeEventListener(i,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){N.removeInstance("Popover",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,n=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},100)},n.showEvents.forEach(function(i){e._triggerEl.addEventListener(i,e._showHandler),e._targetEl.addEventListener(i,e._showHandler)}),n.hideEvents.forEach(function(i){e._triggerEl.addEventListener(i,e._hideHandler),e._targetEl.addEventListener(i,e._hideHandler)})},t.prototype._createPopperInstance=function(){return ya(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},t.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(n){n.key==="Escape"&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(n){e._handleClickOutside(n,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,n){var i=e.target;i!==n&&!n.contains(i)&&!this._triggerEl.contains(i)&&this.isVisible()&&this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return ot(ot({},e),{modifiers:zi(zi([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return ot(ot({},e),{modifiers:zi(zi([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function Ia(){document.querySelectorAll("[data-popover-target]").forEach(function(t){var e=t.getAttribute("data-popover-target"),n=document.getElementById(e);if(n){var i=t.getAttribute("data-popover-trigger"),r=t.getAttribute("data-popover-placement"),s=t.getAttribute("data-popover-offset");new oh(n,t,{placement:r||Kn.placement,offset:s?parseInt(s):Kn.offset,triggerType:i||Kn.triggerType})}else console.error('The popover element with id "'.concat(e,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=oh,window.initPopovers=Ia);var Lr=function(){return Lr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Lr.apply(this,arguments)},ao={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},zw={id:null,override:!0},ah=function(){function t(e,n,i,r,s){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=ao),s===void 0&&(s=zw),this._instanceId=s.id?s.id:i.id,this._parentEl=e,this._triggerEl=n,this._targetEl=i,this._options=Lr(Lr({},ao),r),this._visible=!1,this._initialized=!1,this.init(),N.addInstance("Dial",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var n=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){e.show()},n.showEvents.forEach(function(i){e._triggerEl.addEventListener(i,e._showEventHandler),e._targetEl.addEventListener(i,e._showEventHandler)}),this._hideEventHandler=function(){e._parentEl.matches(":hover")||e.hide()},n.hideEvents.forEach(function(i){e._parentEl.addEventListener(i,e._hideEventHandler)}),this._initialized=!0}},t.prototype.destroy=function(){var e=this;if(this._initialized){var n=this._getTriggerEventTypes(this._options.triggerType);n.showEvents.forEach(function(i){e._triggerEl.removeEventListener(i,e._showEventHandler),e._targetEl.removeEventListener(i,e._showEventHandler)}),n.hideEvents.forEach(function(i){e._parentEl.removeEventListener(i,e._hideEventHandler)}),this._initialized=!1}},t.prototype.removeInstance=function(){N.removeInstance("Dial",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this._visible?this.hide():this.show()},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype._getTriggerEventTypes=function(e){switch(e){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function Sa(){document.querySelectorAll("[data-dial-init]").forEach(function(t){var e=t.querySelector("[data-dial-toggle]");if(e){var n=e.getAttribute("data-dial-toggle"),i=document.getElementById(n);if(i){var r=e.getAttribute("data-dial-trigger");new ah(t,e,i,{triggerType:r||ao.triggerType})}else console.error("Dial with id ".concat(n," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(t.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=ah,window.initDials=Sa);var Nr=function(){return Nr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Nr.apply(this,arguments)},uc={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},$w={id:null,override:!0},lh=function(){function t(e,n,i,r,s){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=uc),s===void 0&&(s=$w),this._instanceId=s.id?s.id:e.id,this._targetEl=e,this._incrementEl=n,this._decrementEl=i,this._options=Nr(Nr({},uc),r),this._initialized=!1,this.init(),N.addInstance("InputCounter",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(n){{var i=n.target;/^\d*$/.test(i.value)||(i.value=i.value.replace(/[^\d]/g,"")),e._options.maxValue!==null&&parseInt(i.value)>e._options.maxValue&&(i.value=e._options.maxValue.toString()),e._options.minValue!==null&&parseInt(i.value)<e._options.minValue&&(i.value=e._options.minValue.toString())}},this._incrementClickHandler=function(){e.increment()},this._decrementClickHandler=function(){e.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){N.removeInstance("InputCounter",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},t.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},t.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},t.prototype.updateOnIncrement=function(e){this._options.onIncrement=e},t.prototype.updateOnDecrement=function(e){this._options.onDecrement=e},t}();function xa(){document.querySelectorAll("[data-input-counter]").forEach(function(t){var e=t.id,n=document.querySelector('[data-input-counter-increment="'+e+'"]'),i=document.querySelector('[data-input-counter-decrement="'+e+'"]'),r=t.getAttribute("data-input-counter-min"),s=t.getAttribute("data-input-counter-max");t?N.instanceExists("InputCounter",t.getAttribute("id"))||new lh(t,n||null,i||null,{minValue:r?parseInt(r):null,maxValue:s?parseInt(s):null}):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=lh,window.initInputCounters=xa);var Rr=function(){return Rr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Rr.apply(this,arguments)},Pr={htmlEntities:!1,contentType:"input",onCopy:function(){}},qw={id:null,override:!0},ch=function(){function t(e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=Pr),r===void 0&&(r=qw),this._instanceId=r.id?r.id:n.id,this._triggerEl=e,this._targetEl=n,this._options=Rr(Rr({},Pr),i),this._initialized=!1,this.init(),N.addInstance("CopyClipboard",this,this._instanceId,r.override)}return t.prototype.init=function(){var e=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){e.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){N.removeInstance("CopyClipboard",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},t.prototype.copy=function(){var e=this.getTargetValue();this._options.htmlEntities&&(e=this.decodeHTML(e));var n=document.createElement("textarea");return n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),this._options.onCopy(this),e},t.prototype.decodeHTML=function(e){var n=document.createElement("textarea");return n.innerHTML=e,n.textContent},t.prototype.updateOnCopyCallback=function(e){this._options.onCopy=e},t}();function Ta(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(t){var e=t.getAttribute("data-copy-to-clipboard-target"),n=document.getElementById(e),i=t.getAttribute("data-copy-to-clipboard-content-type"),r=t.getAttribute("data-copy-to-clipboard-html-entities");n?N.instanceExists("CopyClipboard",n.getAttribute("id"))||new ch(t,n,{htmlEntities:r&&r==="true"?!0:Pr.htmlEntities,contentType:i||Pr.contentType}):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=ch,window.initClipboards=Ta);function lo(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Uw(t){if(Array.isArray(t))return t}function Yw(t){if(Array.isArray(t))return lo(t)}function Kw(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Da(t,e,n){return e=bt(e),Zw(t,uh()?Reflect.construct(e,n||[],bt(t).constructor):e.apply(t,n))}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dc(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,nb(i.key),i)}}function Jt(t,e,n){return e&&dc(t.prototype,e),n&&dc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gi(){return gi=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=eb(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},gi.apply(null,arguments)}function bt(t){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bt(t)}function Aa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&co(t,e)}function uh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uh=function(){return!!t})()}function Gw(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qw(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function Xw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zw(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kw(t)}function co(t,e){return co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},co(t,e)}function ye(t,e){return Uw(t)||Qw(t,e)||dh(t,e)||Xw()}function eb(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=bt(t))!==null;);return t}function Ti(t){return Yw(t)||Gw(t)||dh(t)||Jw()}function tb(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function nb(t){var e=tb(t,"string");return typeof e=="symbol"?e:e+""}function Mr(t){"@babel/helpers - typeof";return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(t)}function dh(t,e){if(t){if(typeof t=="string")return lo(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lo(t,e):void 0}}function Ze(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Oa(t){return t[t.length-1]}function Ut(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(r){t.includes(r)||t.push(r)}),t}function ys(t,e){return t?t.split(e):[]}function La(t,e,n){var i=e===void 0||t>=e,r=n===void 0||t<=n;return i&&r}function hh(t,e,n){return t<e?e:t>n?n:t}function kn(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",s=Object.keys(n).reduce(function(a,l){var c=n[l];return typeof c=="function"&&(c=c(i)),"".concat(a," ").concat(l,'="').concat(c,'"')},t);r+="<".concat(s,"></").concat(t,">");var o=i+1;return o<e?kn(t,e,n,o,r):r}function Na(t){return t.replace(/>\s+/g,">").replace(/\s+</,"<")}function uo(t){return new Date(t).setHours(0,0,0,0)}function Zt(){return new Date().setHours(0,0,0,0)}function gt(){switch(arguments.length){case 0:return Zt();case 1:return uo(arguments.length<=0?void 0:arguments[0])}var t=new Date(0);return t.setFullYear.apply(t,arguments),t.setHours(0,0,0,0)}function dn(t,e){var n=new Date(t);return n.setDate(n.getDate()+e)}function ib(t,e){return dn(t,e*7)}function Fr(t,e){var n=new Date(t),i=n.getMonth()+e,r=i%12;r<0&&(r+=12);var s=n.setMonth(i);return n.getMonth()!==r?n.setDate(0):s}function hn(t,e){var n=new Date(t),i=n.getMonth(),r=n.setFullYear(n.getFullYear()+e);return i===1&&n.getMonth()===2?n.setDate(0):r}function hc(t,e){return(t-e+7)%7}function Br(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=new Date(t).getDay();return dn(t,hc(e,n)-hc(i,n))}function rb(t){var e=Br(t,4,1),n=Br(new Date(e).setMonth(0,4),4,1);return Math.round((e-n)/6048e5)+1}function Tt(t,e){var n=new Date(t).getFullYear();return Math.floor(n/e)*e}var ho=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,sb=/[\s!-/:-@[-`{-~年月日]+/,ws={},fc={y:function(e,n){return new Date(e).setFullYear(parseInt(n,10))},m:function(e,n,i){var r=new Date(e),s=parseInt(n,10)-1;if(isNaN(s)){if(!n)return NaN;var o=n.toLowerCase(),a=function(c){return c.toLowerCase().startsWith(o)};if(s=i.monthsShort.findIndex(a),s<0&&(s=i.months.findIndex(a)),s<0)return NaN}return r.setMonth(s),r.getMonth()!==fh(s)?r.setDate(0):r.getTime()},d:function(e,n){return new Date(e).setDate(parseInt(n,10))}},ob={d:function(e){return e.getDate()},dd:function(e){return $i(e.getDate(),2)},D:function(e,n){return n.daysShort[e.getDay()]},DD:function(e,n){return n.days[e.getDay()]},m:function(e){return e.getMonth()+1},mm:function(e){return $i(e.getMonth()+1,2)},M:function(e,n){return n.monthsShort[e.getMonth()]},MM:function(e,n){return n.months[e.getMonth()]},y:function(e){return e.getFullYear()},yy:function(e){return $i(e.getFullYear(),2).slice(-2)},yyyy:function(e){return $i(e.getFullYear(),4)}};function fh(t){return t>-1?t%12:fh(t+12)}function $i(t,e){return t.toString().padStart(e,"0")}function ph(t){if(typeof t!="string")throw new Error("Invalid date format.");if(t in ws)return ws[t];var e=t.split(ho),n=t.match(new RegExp(ho,"g"));if(e.length===0||!n)throw new Error("Invalid date format.");var i=n.map(function(s){return ob[s]}),r=Object.keys(fc).reduce(function(s,o){var a=n.find(function(l){return l[0]!=="D"&&l[0].toLowerCase()===o});return a&&s.push(o),s},[]);return ws[t]={parser:function(o,a){var l=o.split(sb).reduce(function(c,u,d){if(u.length>0&&n[d]){var h=n[d][0];h==="M"?c.m=u:h!=="D"&&(c[h]=u)}return c},{});return r.reduce(function(c,u){var d=fc[u](c,l[u],a);return isNaN(d)?c:d},Zt())},formatter:function(o,a){var l=i.reduce(function(c,u,d){return c+="".concat(e[d]).concat(u(o,a))},"");return l+=Oa(e)}}}function _i(t,e,n){if(t instanceof Date||typeof t=="number"){var i=uo(t);return isNaN(i)?void 0:i}if(t){if(t==="today")return Zt();if(e&&e.toValue){var r=e.toValue(t,e,n);return isNaN(r)?void 0:uo(r)}return ph(e).parser(t,n)}}function mi(t,e,n){if(isNaN(t)||!t&&t!==0)return"";var i=typeof t=="number"?new Date(t):t;return e.toDisplay?e.toDisplay(i,e,n):ph(e).formatter(i,n)}var Hr=new WeakMap,gh=EventTarget.prototype,pc=gh.addEventListener,gc=gh.removeEventListener;function Ra(t,e){var n=Hr.get(t);n||(n=[],Hr.set(t,n)),e.forEach(function(i){pc.call.apply(pc,Ti(i)),n.push(i)})}function _h(t){var e=Hr.get(t);e&&(e.forEach(function(n){gc.call.apply(gc,Ti(n))}),Hr.delete(t))}if(!Event.prototype.composedPath){var ab=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];n.push(e);var i;return e.parentNode?i=e.parentNode:e.host?i=e.host:e.defaultView&&(i=e.defaultView),i?t(i,n):n};Event.prototype.composedPath=function(){return ab(this.target)}}function mh(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=t[i];return e(r)?r:r===n||!r.parentElement?void 0:mh(t,e,n,i+1)}function vh(t,e){var n=typeof e=="function"?e:function(i){return i.matches(e)};return mh(t.composedPath(),n,t.currentTarget)}var Fn={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},Di={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},lb=document.createRange();function et(t){return lb.createContextualFragment(t)}function Gn(t){t.style.display!=="none"&&(t.style.display&&(t.dataset.styleDisplay=t.style.display),t.style.display="none")}function Qn(t){t.style.display==="none"&&(t.dataset.styleDisplay?(t.style.display=t.dataset.styleDisplay,delete t.dataset.styleDisplay):t.style.display="")}function Vr(t){t.firstChild&&(t.removeChild(t.firstChild),Vr(t))}function cb(t,e){Vr(t),e instanceof DocumentFragment?t.appendChild(e):typeof e=="string"?t.appendChild(et(e)):typeof e.forEach=="function"&&e.forEach(function(n){t.appendChild(n)})}var bs=Di.language,ub=Di.format,db=Di.weekStart;function _c(t,e){return t.length<6&&e>=0&&e<7?Ut(t,e):t}function mc(t){return(t+6)%7}function vc(t,e,n,i){var r=_i(t,e,n);return r!==void 0?r:i}function Es(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,i=parseInt(t,10);return i>=0&&i<=n?i:e}function Cs(t,e){var n=Object.assign({},t),i={},r=e.constructor.locales,s=e.config||{},o=s.format,a=s.language,l=s.locale,c=s.maxDate,u=s.maxView,d=s.minDate,h=s.pickLevel,f=s.startView,p=s.weekStart;if(n.language){var g;if(n.language!==a&&(r[n.language]?g=n.language:(g=n.language.split("-")[0],r[g]===void 0&&(g=!1))),delete n.language,g){a=i.language=g;var _=l||r[bs];l=Object.assign({format:ub,weekStart:db},r[bs]),a!==bs&&Object.assign(l,r[a]),i.locale=l,o===_.format&&(o=i.format=l.format),p===_.weekStart&&(p=i.weekStart=l.weekStart,i.weekEnd=mc(l.weekStart))}}if(n.format){var C=typeof n.format.toDisplay=="function",O=typeof n.format.toValue=="function",T=ho.test(n.format);(C&&O||T)&&(o=i.format=n.format),delete n.format}var b=d,w=c;if(n.minDate!==void 0&&(b=n.minDate===null?gt(0,0,1):vc(n.minDate,o,l,b),delete n.minDate),n.maxDate!==void 0&&(w=n.maxDate===null?void 0:vc(n.maxDate,o,l,w),delete n.maxDate),w<b?(d=i.minDate=w,c=i.maxDate=b):(d!==b&&(d=i.minDate=b),c!==w&&(c=i.maxDate=w)),n.datesDisabled&&(i.datesDisabled=n.datesDisabled.reduce(function(R,W){var K=_i(W,o,l);return K!==void 0?Ut(R,K):R},[]),delete n.datesDisabled),n.defaultViewDate!==void 0){var E=_i(n.defaultViewDate,o,l);E!==void 0&&(i.defaultViewDate=E),delete n.defaultViewDate}if(n.weekStart!==void 0){var L=Number(n.weekStart)%7;isNaN(L)||(p=i.weekStart=L,i.weekEnd=mc(L)),delete n.weekStart}if(n.daysOfWeekDisabled&&(i.daysOfWeekDisabled=n.daysOfWeekDisabled.reduce(_c,[]),delete n.daysOfWeekDisabled),n.daysOfWeekHighlighted&&(i.daysOfWeekHighlighted=n.daysOfWeekHighlighted.reduce(_c,[]),delete n.daysOfWeekHighlighted),n.maxNumberOfDates!==void 0){var I=parseInt(n.maxNumberOfDates,10);I>=0&&(i.maxNumberOfDates=I,i.multidate=I!==1),delete n.maxNumberOfDates}n.dateDelimiter&&(i.dateDelimiter=String(n.dateDelimiter),delete n.dateDelimiter);var D=h;n.pickLevel!==void 0&&(D=Es(n.pickLevel,2),delete n.pickLevel),D!==h&&(h=i.pickLevel=D);var A=u;n.maxView!==void 0&&(A=Es(n.maxView,u),delete n.maxView),A=h>A?h:A,A!==u&&(u=i.maxView=A);var y=f;if(n.startView!==void 0&&(y=Es(n.startView,y),delete n.startView),y<h?y=h:y>u&&(y=u),y!==f&&(i.startView=y),n.prevArrow){var v=et(n.prevArrow);v.childNodes.length>0&&(i.prevArrow=v.childNodes),delete n.prevArrow}if(n.nextArrow){var S=et(n.nextArrow);S.childNodes.length>0&&(i.nextArrow=S.childNodes),delete n.nextArrow}if(n.disableTouchKeyboard!==void 0&&(i.disableTouchKeyboard="ontouchstart"in document&&!!n.disableTouchKeyboard,delete n.disableTouchKeyboard),n.orientation){var k=n.orientation.toLowerCase().split(/\s+/g);i.orientation={x:k.find(function(R){return R==="left"||R==="right"})||"auto",y:k.find(function(R){return R==="top"||R==="bottom"})||"auto"},delete n.orientation}if(n.todayBtnMode!==void 0){switch(n.todayBtnMode){case 0:case 1:i.todayBtnMode=n.todayBtnMode}delete n.todayBtnMode}return Object.keys(n).forEach(function(R){n[R]!==void 0&&Ze(Di,R)&&(i[R]=n[R])}),i}var hb=Na(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),fb=Na(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(kn("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(kn("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),pb=Na(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(kn("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),Pa=function(){function t(e,n){Xt(this,t),Object.assign(this,n,{picker:e,element:et('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return Jt(t,[{key:"init",value:function(n){n.pickLevel!==void 0&&(this.isMinView=this.id===n.pickLevel),this.setOptions(n),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(n,i,r){var s=this.beforeShow(new Date(r));switch(Mr(s)){case"boolean":s={enabled:s};break;case"string":s={classes:s}}if(s){if(s.enabled===!1&&(n.classList.add("disabled"),Ut(this.disabled,i)),s.classes){var o,a=s.classes.split(/\s+/);(o=n.classList).add.apply(o,Ti(a)),a.includes("disabled")&&Ut(this.disabled,i)}s.content&&cb(n,s.content)}}}])}(),gb=function(t){function e(n){return Xt(this,e),Da(this,e,[n,{id:0,name:"days",cellClass:"day"}])}return Aa(e,t),Jt(e,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(r){var s=et(fb).firstChild;this.dow=s.firstChild,this.grid=s.lastChild,this.element.appendChild(s)}gi(bt(e.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){var r=this,s;if(Ze(i,"minDate")&&(this.minDate=i.minDate),Ze(i,"maxDate")&&(this.maxDate=i.maxDate),i.datesDisabled&&(this.datesDisabled=i.datesDisabled),i.daysOfWeekDisabled&&(this.daysOfWeekDisabled=i.daysOfWeekDisabled,s=!0),i.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=i.daysOfWeekHighlighted),i.todayHighlight!==void 0&&(this.todayHighlight=i.todayHighlight),i.weekStart!==void 0&&(this.weekStart=i.weekStart,this.weekEnd=i.weekEnd,s=!0),i.locale){var o=this.locale=i.locale;this.dayNames=o.daysMin,this.switchLabelFormat=o.titleFormat,s=!0}if(i.beforeShowDay!==void 0&&(this.beforeShow=typeof i.beforeShowDay=="function"?i.beforeShowDay:void 0),i.calendarWeeks!==void 0)if(i.calendarWeeks&&!this.calendarWeeks){var a=et(pb).firstChild;this.calendarWeeks={element:a,dow:a.firstChild,weeks:a.lastChild},this.element.insertBefore(a,this.element.firstChild)}else this.calendarWeeks&&!i.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);i.showDaysOfWeek!==void 0&&(i.showDaysOfWeek?(Qn(this.dow),this.calendarWeeks&&Qn(this.calendarWeeks.dow)):(Gn(this.dow),this.calendarWeeks&&Gn(this.calendarWeeks.dow))),s&&Array.from(this.dow.children).forEach(function(l,c){var u=(r.weekStart+c)%7;l.textContent=r.dayNames[u],l.className=r.daysOfWeekDisabled.includes(u)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate),r=i.getFullYear(),s=i.getMonth(),o=gt(r,s,1),a=Br(o,this.weekStart,this.weekStart);this.first=o,this.last=gt(r,s+1,0),this.start=a,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var i=this.picker.datepicker,r=i.dates,s=i.rangepicker;this.selected=r,s&&(this.range=s.dates)}},{key:"render",value:function(){var i=this;this.today=this.todayHighlight?Zt():void 0,this.disabled=Ti(this.datesDisabled);var r=mi(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(r),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var s=Br(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(o,a){o.textContent=rb(ib(s,a))})}Array.from(this.grid.children).forEach(function(o,a){var l=o.classList,c=dn(i.start,a),u=new Date(c),d=u.getDay();if(o.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),o.dataset.date=c,o.textContent=u.getDate(),c<i.first?l.add("prev","text-gray-500","dark:text-white"):c>i.last&&l.add("next","text-gray-500","dark:text-white"),i.today===c&&l.add("today","bg-gray-100","dark:bg-gray-600"),(c<i.minDate||c>i.maxDate||i.disabled.includes(c))&&(l.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),l.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),i.daysOfWeekDisabled.includes(d)&&(l.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),l.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),Ut(i.disabled,c)),i.daysOfWeekHighlighted.includes(d)&&l.add("highlighted"),i.range){var h=ye(i.range,2),f=h[0],p=h[1];c>f&&c<p&&(l.add("range","bg-gray-200","dark:bg-gray-600"),l.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),c===f&&(l.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),l.remove("rounded-lg","rounded-r-lg")),c===p&&(l.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),l.remove("rounded-lg","rounded-l-lg"))}i.selected.includes(c)&&(l.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),l.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),c===i.focused&&l.add("focused"),i.beforeShow&&i.performBeforeHook(o,c,c)})}},{key:"refresh",value:function(){var i=this,r=this.range||[],s=ye(r,2),o=s[0],a=s[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(l){l.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),l.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(l){var c=Number(l.dataset.date),u=l.classList;u.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),c>o&&c<a&&(u.add("range","bg-gray-200","dark:bg-gray-600"),u.remove("rounded-lg")),c===o&&(u.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),u.remove("rounded-lg")),c===a&&(u.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),u.remove("rounded-lg")),i.selected.includes(c)&&(u.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),u.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),c===i.focused&&u.add("focused")})}},{key:"refreshFocus",value:function(){var i=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(r){r.classList.remove("focused")}),this.grid.children[i].classList.add("focused")}}])}(Pa);function yc(t,e){if(!(!t||!t[0]||!t[1])){var n=ye(t,2),i=ye(n[0],2),r=i[0],s=i[1],o=ye(n[1],2),a=o[0],l=o[1];if(!(r>e||a<e))return[r===e?s:-1,a===e?l:12]}}var _b=function(t){function e(n){return Xt(this,e),Da(this,e,[n,{id:1,name:"months",cellClass:"month"}])}return Aa(e,t),Jt(e,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(et(kn("span",12,{"data-month":function(o){return o}})))),gi(bt(e.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){if(i.locale&&(this.monthNames=i.locale.monthsShort),Ze(i,"minDate"))if(i.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var r=new Date(i.minDate);this.minYear=r.getFullYear(),this.minMonth=r.getMonth(),this.minDate=r.setDate(1)}if(Ze(i,"maxDate"))if(i.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var s=new Date(i.maxDate);this.maxYear=s.getFullYear(),this.maxMonth=s.getMonth(),this.maxDate=gt(this.maxYear,this.maxMonth+1,0)}i.beforeShowMonth!==void 0&&(this.beforeShow=typeof i.beforeShowMonth=="function"?i.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate);this.year=i.getFullYear(),this.focused=i.getMonth()}},{key:"updateSelection",value:function(){var i=this.picker.datepicker,r=i.dates,s=i.rangepicker;this.selected=r.reduce(function(o,a){var l=new Date(a),c=l.getFullYear(),u=l.getMonth();return o[c]===void 0?o[c]=[u]:Ut(o[c],u),o},{}),s&&s.dates&&(this.range=s.dates.map(function(o){var a=new Date(o);return isNaN(a)?void 0:[a.getFullYear(),a.getMonth()]}))}},{key:"render",value:function(){var i=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var r=this.selected[this.year]||[],s=this.year<this.minYear||this.year>this.maxYear,o=this.year===this.minYear,a=this.year===this.maxYear,l=yc(this.range,this.year);Array.from(this.grid.children).forEach(function(c,u){var d=c.classList,h=gt(i.year,u,1);if(c.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),i.isMinView&&(c.dataset.date=h),c.textContent=i.monthNames[u],(s||o&&u<i.minMonth||a&&u>i.maxMonth)&&d.add("disabled"),l){var f=ye(l,2),p=f[0],g=f[1];u>p&&u<g&&d.add("range"),u===p&&d.add("range-start"),u===g&&d.add("range-end")}r.includes(u)&&(d.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),d.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),u===i.focused&&d.add("focused"),i.beforeShow&&i.performBeforeHook(c,u,h)})}},{key:"refresh",value:function(){var i=this,r=this.selected[this.year]||[],s=yc(this.range,this.year)||[],o=ye(s,2),a=o[0],l=o[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(c){c.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),c.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(c,u){var d=c.classList;u>a&&u<l&&d.add("range"),u===a&&d.add("range-start"),u===l&&d.add("range-end"),r.includes(u)&&(d.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),d.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),u===i.focused&&d.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(i){i.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])}(Pa);function mb(t){return Ti(t).reduce(function(e,n,i){return e+=i?n:n.toUpperCase()},"")}var wc=function(t){function e(n,i){return Xt(this,e),Da(this,e,[n,i])}return Aa(e,t),Jt(e,[{key:"init",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(mb(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(et(kn("span",12)))),gi(bt(e.prototype),"init",this).call(this,i)}},{key:"setOptions",value:function(i){if(Ze(i,"minDate")&&(i.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=Tt(i.minDate,this.step),this.minDate=gt(this.minYear,0,1))),Ze(i,"maxDate")&&(i.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=Tt(i.maxDate,this.step),this.maxDate=gt(this.maxYear,11,31))),i[this.beforeShowOption]!==void 0){var r=i[this.beforeShowOption];this.beforeShow=typeof r=="function"?r:void 0}}},{key:"updateFocus",value:function(){var i=new Date(this.picker.viewDate),r=Tt(i,this.navStep),s=r+9*this.step;this.first=r,this.last=s,this.start=r-this.step,this.focused=Tt(i,this.step)}},{key:"updateSelection",value:function(){var i=this,r=this.picker.datepicker,s=r.dates,o=r.rangepicker;this.selected=s.reduce(function(a,l){return Ut(a,Tt(l,i.step))},[]),o&&o.dates&&(this.range=o.dates.map(function(a){if(a!==void 0)return Tt(a,i.step)}))}},{key:"render",value:function(){var i=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(r,s){var o=r.classList,a=i.start+s*i.step,l=gt(a,0,1);if(r.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(i.cellClass),i.isMinView&&(r.dataset.date=l),r.textContent=r.dataset.year=a,s===0?o.add("prev"):s===11&&o.add("next"),(a<i.minYear||a>i.maxYear)&&o.add("disabled"),i.range){var c=ye(i.range,2),u=c[0],d=c[1];a>u&&a<d&&o.add("range"),a===u&&o.add("range-start"),a===d&&o.add("range-end")}i.selected.includes(a)&&(o.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),o.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),a===i.focused&&o.add("focused"),i.beforeShow&&i.performBeforeHook(r,a,l)})}},{key:"refresh",value:function(){var i=this,r=this.range||[],s=ye(r,2),o=s[0],a=s[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(l){l.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(l){var c=Number(l.textContent),u=l.classList;c>o&&c<a&&u.add("range"),c===o&&u.add("range-start"),c===a&&u.add("range-end"),i.selected.includes(c)&&(u.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),u.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),c===i.focused&&u.add("focused")})}},{key:"refreshFocus",value:function(){var i=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(r){r.classList.remove("focused")}),this.grid.children[i].classList.add("focused")}}])}(Pa);function fn(t,e){var n={date:t.getDate(),viewDate:new Date(t.picker.viewDate),viewId:t.picker.currentView.id,datepicker:t};t.element.dispatchEvent(new CustomEvent(e,{detail:n}))}function Wr(t,e){var n=t.config,i=n.minDate,r=n.maxDate,s=t.picker,o=s.currentView,a=s.viewDate,l;switch(o.id){case 0:l=Fr(a,e);break;case 1:l=hn(a,e);break;default:l=hn(a,e*o.navStep)}l=hh(l,i,r),t.picker.changeFocus(l).render()}function yh(t){var e=t.picker.currentView.id;e!==t.config.maxView&&t.picker.changeView(e+1).render()}function wh(t){t.config.updateOnBlur?t.update({autohide:!0}):(t.refresh("input"),t.hide())}function bc(t,e){var n=t.picker,i=new Date(n.viewDate),r=n.currentView.id,s=r===1?Fr(i,e-i.getMonth()):hn(i,e-i.getFullYear());n.changeFocus(s).changeView(r-1).render()}function vb(t){var e=t.picker,n=Zt();if(t.config.todayBtnMode===1){if(t.config.autohide){t.setDate(n);return}t.setDate(n,{render:!1}),e.update()}e.viewDate!==n&&e.changeFocus(n),e.changeView(0).render()}function yb(t){t.setDate({clear:!0})}function wb(t){yh(t)}function bb(t){Wr(t,-1)}function Eb(t){Wr(t,1)}function Cb(t,e){var n=vh(e,".datepicker-cell");if(!(!n||n.classList.contains("disabled"))){var i=t.picker.currentView,r=i.id,s=i.isMinView;s?t.setDate(Number(n.dataset.date)):r===1?bc(t,Number(n.dataset.month)):bc(t,Number(n.dataset.year))}}function kb(t){!t.inline&&!t.config.disableTouchKeyboard&&t.inputField.focus()}function Ec(t,e){if(e.title!==void 0&&(e.title?(t.controls.title.textContent=e.title,Qn(t.controls.title)):(t.controls.title.textContent="",Gn(t.controls.title))),e.prevArrow){var n=t.controls.prevBtn;Vr(n),e.prevArrow.forEach(function(a){n.appendChild(a.cloneNode(!0))})}if(e.nextArrow){var i=t.controls.nextBtn;Vr(i),e.nextArrow.forEach(function(a){i.appendChild(a.cloneNode(!0))})}if(e.locale&&(t.controls.todayBtn.textContent=e.locale.today,t.controls.clearBtn.textContent=e.locale.clear),e.todayBtn!==void 0&&(e.todayBtn?Qn(t.controls.todayBtn):Gn(t.controls.todayBtn)),Ze(e,"minDate")||Ze(e,"maxDate")){var r=t.datepicker.config,s=r.minDate,o=r.maxDate;t.controls.todayBtn.disabled=!La(Zt(),s,o)}e.clearBtn!==void 0&&(e.clearBtn?Qn(t.controls.clearBtn):Gn(t.controls.clearBtn))}function Cc(t){var e=t.dates,n=t.config,i=e.length>0?Oa(e):n.defaultViewDate;return hh(i,n.minDate,n.maxDate)}function kc(t,e){var n=new Date(t.viewDate),i=new Date(e),r=t.currentView,s=r.id,o=r.year,a=r.first,l=r.last,c=i.getFullYear();switch(t.viewDate=e,c!==n.getFullYear()&&fn(t.datepicker,"changeYear"),i.getMonth()!==n.getMonth()&&fn(t.datepicker,"changeMonth"),s){case 0:return e<a||e>l;case 1:return c!==o;default:return c<a||c>l}}function ks(t){return window.getComputedStyle(t).direction}var Ib=function(){function t(e){Xt(this,t),this.datepicker=e;var n=hb.replace(/%buttonClass%/g,e.config.buttonClass),i=this.element=et(n).firstChild,r=ye(i.firstChild.children,3),s=r[0],o=r[1],a=r[2],l=s.firstElementChild,c=ye(s.lastElementChild.children,3),u=c[0],d=c[1],h=c[2],f=ye(a.firstChild.children,2),p=f[0],g=f[1],_={title:l,prevBtn:u,viewSwitch:d,nextBtn:h,todayBtn:p,clearBtn:g};this.main=o,this.controls=_;var C=e.inline?"inline":"dropdown";i.classList.add("datepicker-".concat(C)),C==="dropdown"&&i.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),Ec(this,e.config),this.viewDate=Cc(e),Ra(e,[[i,"click",kb.bind(null,e),{capture:!0}],[o,"click",Cb.bind(null,e)],[_.viewSwitch,"click",wb.bind(null,e)],[_.prevBtn,"click",bb.bind(null,e)],[_.nextBtn,"click",Eb.bind(null,e)],[_.todayBtn,"click",vb.bind(null,e)],[_.clearBtn,"click",yb.bind(null,e)]]),this.views=[new gb(this),new _b(this),new wc(this,{id:2,name:"years",cellClass:"year",step:1}),new wc(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[e.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),e.config.container.appendChild(this.element)}return Jt(t,[{key:"setOptions",value:function(n){Ec(this,n),this.views.forEach(function(i){i.init(n,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var n=this.datepicker;if(!n.inline){var i=ks(n.inputField);i!==ks(n.config.container)?this.element.dir=i:this.element.dir&&this.element.removeAttribute("dir"),this.place(),n.config.disableTouchKeyboard&&n.inputField.blur()}fn(n,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,fn(this.datepicker,"hide"))}},{key:"place",value:function(){var n=this.element,i=n.classList,r=n.style,s=this.datepicker,o=s.config,a=s.inputField,l=o.container,c=this.element.getBoundingClientRect(),u=c.width,d=c.height,h=l.getBoundingClientRect(),f=h.left,p=h.top,g=h.width,_=a.getBoundingClientRect(),C=_.left,O=_.top,T=_.width,b=_.height,w=o.orientation,E=w.x,L=w.y,I,D,A;l===document.body?(I=window.scrollY,D=C+window.scrollX,A=O+I):(I=l.scrollTop,D=C-f,A=O-p+I),E==="auto"&&(D<0?(E="left",D=10):D+u>g?E="right":E=ks(a)==="rtl"?"right":"left"),E==="right"&&(D-=u-T),L==="auto"&&(L=A-d<I?"bottom":"top"),L==="top"?A-=d:A+=b,i.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),i.add("datepicker-orient-".concat(L),"datepicker-orient-".concat(E)),r.top=A&&"".concat(A,"px"),r.left=D&&"".concat(D,"px")}},{key:"setViewSwitchLabel",value:function(n){this.controls.viewSwitch.textContent=n}},{key:"setPrevBtnDisabled",value:function(n){this.controls.prevBtn.disabled=n}},{key:"setNextBtnDisabled",value:function(n){this.controls.nextBtn.disabled=n}},{key:"changeView",value:function(n){var i=this.currentView,r=this.views[n];return r.id!==i.id&&(this.currentView=r,this._renderMethod="render",fn(this.datepicker,"changeView"),this.main.replaceChild(r.element,i.element)),this}},{key:"changeFocus",value:function(n){return this._renderMethod=kc(this,n)?"render":"refreshFocus",this.views.forEach(function(i){i.updateFocus()}),this}},{key:"update",value:function(){var n=Cc(this.datepicker);return this._renderMethod=kc(this,n)?"render":"refresh",this.views.forEach(function(i){i.updateFocus(),i.updateSelection()}),this}},{key:"render",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=n&&this._renderMethod||"render";delete this._renderMethod,this.currentView[i]()}}])}();function bh(t,e,n,i,r,s){if(La(t,r,s)){if(i(t)){var o=e(t,n);return bh(o,e,n,i,r,s)}return t}}function qi(t,e,n,i){var r=t.picker,s=r.currentView,o=s.step||1,a=r.viewDate,l,c;switch(s.id){case 0:i?a=dn(a,n*7):e.ctrlKey||e.metaKey?a=hn(a,n):a=dn(a,n),l=dn,c=function(d){return s.disabled.includes(d)};break;case 1:a=Fr(a,i?n*4:n),l=Fr,c=function(d){var h=new Date(d),f=s.year,p=s.disabled;return h.getFullYear()===f&&p.includes(h.getMonth())};break;default:a=hn(a,n*(i?4:1)*o),l=hn,c=function(d){return s.disabled.includes(Tt(d,o))}}a=bh(a,l,n<0?-o:o,c,s.minDate,s.maxDate),a!==void 0&&r.changeFocus(a).render()}function Sb(t,e){if(e.key==="Tab"){wh(t);return}var n=t.picker,i=n.currentView,r=i.id,s=i.isMinView;if(n.active)if(t.editMode)switch(e.key){case"Escape":n.hide();break;case"Enter":t.exitEditMode({update:!0,autohide:t.config.autohide});break;default:return}else switch(e.key){case"Escape":n.hide();break;case"ArrowLeft":if(e.ctrlKey||e.metaKey)Wr(t,-1);else if(e.shiftKey){t.enterEditMode();return}else qi(t,e,-1,!1);break;case"ArrowRight":if(e.ctrlKey||e.metaKey)Wr(t,1);else if(e.shiftKey){t.enterEditMode();return}else qi(t,e,1,!1);break;case"ArrowUp":if(e.ctrlKey||e.metaKey)yh(t);else if(e.shiftKey){t.enterEditMode();return}else qi(t,e,-1,!0);break;case"ArrowDown":if(e.shiftKey&&!e.ctrlKey&&!e.metaKey){t.enterEditMode();return}qi(t,e,1,!0);break;case"Enter":s?t.setDate(n.viewDate):n.changeView(r-1).render();break;case"Backspace":case"Delete":t.enterEditMode();return;default:e.key.length===1&&!e.ctrlKey&&!e.metaKey&&t.enterEditMode();return}else switch(e.key){case"ArrowDown":case"Escape":n.show();break;case"Enter":t.update();break;default:return}e.preventDefault(),e.stopPropagation()}function xb(t){t.config.showOnFocus&&!t._showing&&t.show()}function Tb(t,e){var n=e.target;(t.picker.active||t.config.showOnClick)&&(n._active=n===document.activeElement,n._clicking=setTimeout(function(){delete n._active,delete n._clicking},2e3))}function Db(t,e){var n=e.target;n._clicking&&(clearTimeout(n._clicking),delete n._clicking,n._active&&t.enterEditMode(),delete n._active,t.config.showOnClick&&t.show())}function Ab(t,e){e.clipboardData.types.includes("text/plain")&&t.enterEditMode()}function Ob(t,e){var n=t.element;if(n===document.activeElement){var i=t.picker.element;vh(e,function(r){return r===n||r===i})||wh(t)}}function Eh(t,e){return t.map(function(n){return mi(n,e.format,e.locale)}).join(e.dateDelimiter)}function Ch(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t.config,r=t.dates,s=t.rangepicker;if(e.length===0)return n?[]:void 0;var o=s&&t===s.datepickers[1],a=e.reduce(function(l,c){var u=_i(c,i.format,i.locale);if(u===void 0)return l;if(i.pickLevel>0){var d=new Date(u);i.pickLevel===1?u=o?d.setMonth(d.getMonth()+1,0):d.setDate(1):u=o?d.setFullYear(d.getFullYear()+1,0,0):d.setMonth(0,1)}return La(u,i.minDate,i.maxDate)&&!l.includes(u)&&!i.datesDisabled.includes(u)&&!i.daysOfWeekDisabled.includes(new Date(u).getDay())&&l.push(u),l},[]);if(a.length!==0)return i.multidate&&!n&&(a=a.reduce(function(l,c){return r.includes(c)||l.push(c),l},r.filter(function(l){return!a.includes(l)}))),i.maxNumberOfDates&&a.length>i.maxNumberOfDates?a.slice(i.maxNumberOfDates*-1):a}function jr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=t.config,r=t.picker,s=t.inputField;if(e&2){var o=r.active?i.pickLevel:i.startView;r.update().changeView(o).render(n)}e&1&&s&&(s.value=Eh(t.dates,i))}function Ic(t,e,n){var i=n.clear,r=n.render,s=n.autohide;r===void 0&&(r=!0),r?s===void 0&&(s=t.config.autohide):s=!1;var o=Ch(t,e,i);o&&(o.toString()!==t.dates.toString()?(t.dates=o,jr(t,r?3:1),fn(t,"changeDate")):jr(t,1),s&&t.hide())}var Zi=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;Xt(this,t),e.datepicker=this,this.element=e;var r=this.config=Object.assign({buttonClass:n.buttonClass&&String(n.buttonClass)||"button",container:document.body,defaultViewDate:Zt(),maxDate:void 0,minDate:void 0},Cs(Di,this));this._options=n,Object.assign(r,Cs(n,this));var s=this.inline=e.tagName!=="INPUT",o,a;if(s)r.container=e,a=ys(e.dataset.date,r.dateDelimiter),delete e.dataset.date;else{var l=n.container?document.querySelector(n.container):null;l&&(r.container=l),o=this.inputField=e,o.classList.add("datepicker-input"),a=ys(o.value,r.dateDelimiter)}if(i){var c=i.inputs.indexOf(o),u=i.datepickers;if(c<0||c>1||!Array.isArray(u))throw Error("Invalid rangepicker object.");u[c]=this,Object.defineProperty(this,"rangepicker",{get:function(){return i}})}this.dates=[];var d=Ch(this,a);d&&d.length>0&&(this.dates=d),o&&(o.value=Eh(this.dates,r));var h=this.picker=new Ib(this);if(s)this.show();else{var f=Ob.bind(null,this),p=[[o,"keydown",Sb.bind(null,this)],[o,"focus",xb.bind(null,this)],[o,"mousedown",Tb.bind(null,this)],[o,"click",Db.bind(null,this)],[o,"paste",Ab.bind(null,this)],[document,"mousedown",f],[document,"touchstart",f],[window,"resize",h.place.bind(h)]];Ra(this,p)}}return Jt(t,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(n){var i=this.picker,r=Cs(n,this);Object.assign(this._options,n),Object.assign(this.config,r),i.setOptions(r),jr(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),_h(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=i?function(s){return mi(s,i,n.config.locale)}:function(s){return new Date(s)};if(this.config.multidate)return this.dates.map(r);if(this.dates.length>0)return r(this.dates[0])}},{key:"setDate",value:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var s=[].concat(i),o={},a=Oa(i);Mr(a)==="object"&&!Array.isArray(a)&&!(a instanceof Date)&&a&&Object.assign(o,s.pop());var l=Array.isArray(s[0])?s[0]:s;Ic(this,l,o)}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var i={clear:!0,autohide:!!(n&&n.autohide)},r=ys(this.inputField.value,this.config.dateDelimiter);Ic(this,r,i)}}},{key:"refresh",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&typeof n!="string"&&(i=n,n=void 0);var r;n==="picker"?r=2:n==="input"?r=1:r=3,jr(this,r,!i)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var i=Object.assign({update:!1},n);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),i.update&&this.update(i)}}}],[{key:"formatDate",value:function(n,i,r){return mi(n,i,r&&Fn[r]||Fn.en)}},{key:"parseDate",value:function(n,i,r){return _i(n,i,r&&Fn[r]||Fn.en)}},{key:"locales",get:function(){return Fn}}])}();function Sc(t){var e=Object.assign({},t);return delete e.inputs,delete e.allowOneSidedRange,delete e.maxNumberOfDates,e}function xc(t,e,n,i){Ra(t,[[n,"changeDate",e]]),new Zi(n,i,t)}function Bn(t,e){if(!t._updating){t._updating=!0;var n=e.target;if(n.datepicker!==void 0){var i=t.datepickers,r={render:!1},s=t.inputs.indexOf(n),o=s===0?1:0,a=i[s].dates[0],l=i[o].dates[0];a!==void 0&&l!==void 0?s===0&&a>l?(i[0].setDate(l,r),i[1].setDate(a,r)):s===1&&a<l&&(i[0].setDate(a,r),i[1].setDate(l,r)):t.allowOneSidedRange||(a!==void 0||l!==void 0)&&(r.clear=!0,i[o].setDate(i[s].dates,r)),i[0].picker.update().render(),i[1].picker.update().render(),delete t._updating}}}var Is=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xt(this,t);var i=Array.isArray(n.inputs)?n.inputs:Array.from(e.querySelectorAll("input"));if(!(i.length<2)){e.rangepicker=this,this.element=e,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!n.allowOneSidedRange;var r=Bn.bind(null,this),s=Sc(n),o=[];Object.defineProperty(this,"datepickers",{get:function(){return o}}),xc(this,r,this.inputs[0],s),xc(this,r,this.inputs[1],s),Object.freeze(o),o[0].dates.length>0?Bn(this,{target:this.inputs[0]}):o[1].dates.length>0&&Bn(this,{target:this.inputs[1]})}}return Jt(t,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(n){this.allowOneSidedRange=!!n.allowOneSidedRange;var i=Sc(n);this.datepickers[0].setOptions(i),this.datepickers[1].setOptions(i)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),_h(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=i?function(s){return mi(s,i,n.datepickers[0].config.locale)}:function(s){return new Date(s)};return this.dates.map(function(s){return s===void 0?s:r(s)})}},{key:"setDates",value:function(n,i){var r=ye(this.datepickers,2),s=r[0],o=r[1],a=this.dates;this._updating=!0,s.setDate(n),o.setDate(i),delete this._updating,o.dates[0]!==a[1]?Bn(this,{target:this.inputs[1]}):s.dates[0]!==a[0]&&Bn(this,{target:this.inputs[0]})}}])}(),zr=function(){return zr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},zr.apply(this,arguments)},ke={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},Lb={id:null,override:!0},kh=function(){function t(e,n,i){e===void 0&&(e=null),n===void 0&&(n=ke),i===void 0&&(i=Lb),this._instanceId=i.id?i.id:e.id,this._datepickerEl=e,this._datepickerInstance=null,this._options=zr(zr({},ke),n),this._initialized=!1,this.init(),N.addInstance("Datepicker",this,this._instanceId,i.override)}return t.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new Is(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new Zi(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},t.prototype.removeInstance=function(){this.destroy(),N.removeInstance("Datepicker",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getDatepickerInstance=function(){return this._datepickerInstance},t.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof Is)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof Zi)return this._datepickerInstance.getDate()},t.prototype.setDate=function(e){if(this._options.rangePicker&&this._datepickerInstance instanceof Is)return this._datepickerInstance.setDates(e);if(!this._options.rangePicker&&this._datepickerInstance instanceof Zi)return this._datepickerInstance.setDate(e)},t.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},t.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},t.prototype._getDatepickerOptions=function(e){var n={};return e.buttons&&(n.todayBtn=!0,n.clearBtn=!0,e.autoSelectToday&&(n.todayBtnMode=1)),e.autohide&&(n.autohide=!0),e.format&&(n.format=e.format),e.maxDate&&(n.maxDate=e.maxDate),e.minDate&&(n.minDate=e.minDate),e.orientation&&(n.orientation=e.orientation),e.title&&(n.title=e.title),e.language&&(n.language=e.language),n},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t}();function Ma(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(t){if(t){var e=t.hasAttribute("datepicker-buttons"),n=t.hasAttribute("datepicker-autoselect-today"),i=t.hasAttribute("datepicker-autohide"),r=t.getAttribute("datepicker-format"),s=t.getAttribute("datepicker-max-date"),o=t.getAttribute("datepicker-min-date"),a=t.getAttribute("datepicker-orientation"),l=t.getAttribute("datepicker-title"),c=t.getAttribute("datepicker-language"),u=t.hasAttribute("date-rangepicker");new kh(t,{buttons:e||ke.buttons,autoSelectToday:n||ke.autoSelectToday,autohide:i||ke.autohide,format:r||ke.format,maxDate:s||ke.maxDate,minDate:o||ke.minDate,orientation:a||ke.orientation,title:l||ke.title,language:c||ke.language,rangePicker:u||ke.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=kh,window.initDatepickers=Ma);function Ih(){la(),ca(),ua(),da(),wa(),ba(),Ea(),Ca(),ka(),Ia(),Sa(),xa(),Ta(),Ma()}typeof window<"u"&&(window.initFlowbite=Ih);var Nb=new Sy("load",[la,ca,ua,da,wa,ba,Ea,Ca,ka,Ia,Sa,xa,Ta,Ma]);Nb.init();const Rb={class:"container mx-auto px-4 lg:max-w-60 lg:mt-28 mt-16 pb-20"},Pb={class:"relative"},Mb=["onClick"],Fb=["data-tooltip-target"],Bb=ru('<svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M6 11C6 8.17157 6 6.75736 6.87868 5.87868C7.75736 5 9.17157 5 12 5H15C17.8284 5 19.2426 5 20.1213 5.87868C21 6.75736 21 8.17157 21 11V16C21 18.8284 21 20.2426 20.1213 21.1213C19.2426 22 17.8284 22 15 22H12C9.17157 22 7.75736 22 6.87868 21.1213C6 20.2426 6 18.8284 6 16V11Z" stroke="#f5f5f5" stroke-width="1.5"></path> <path opacity="0.5" d="M6 19C4.34315 19 3 17.6569 3 16V10C3 6.22876 3 4.34315 4.17157 3.17157C5.34315 2 7.22876 2 11 2H15C16.6569 2 18 3.34315 18 5" stroke="#f5f5f5" stroke-width="1.5"></path></g></svg>',1),Hb=[Bb],Vb={key:1},Wb=ru('<svg width="33px" height="33px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M6.59961 11.3974C6.59961 8.67119 6.59961 7.3081 7.44314 6.46118C8.28667 5.61426 9.64432 5.61426 12.3596 5.61426H15.2396C17.9549 5.61426 19.3125 5.61426 20.1561 6.46118C20.9996 7.3081 20.9996 8.6712 20.9996 11.3974V16.2167C20.9996 18.9429 20.9996 20.306 20.1561 21.1529C19.3125 21.9998 17.9549 21.9998 15.2396 21.9998H12.3596C9.64432 21.9998 8.28667 21.9998 7.44314 21.1529C6.59961 20.306 6.59961 18.9429 6.59961 16.2167V11.3974Z" fill="#e3e3e3"></path> <path opacity="0.5" d="M4.17157 3.17157C3 4.34315 3 6.22876 3 10V12C3 15.7712 3 17.6569 4.17157 18.8284C4.78913 19.446 5.6051 19.738 6.79105 19.8761C6.59961 19.0353 6.59961 17.8796 6.59961 16.2167V11.3974C6.59961 8.6712 6.59961 7.3081 7.44314 6.46118C8.28667 5.61426 9.64432 5.61426 12.3596 5.61426H15.2396C16.8915 5.61426 18.0409 5.61426 18.8777 5.80494C18.7403 4.61146 18.4484 3.79154 17.8284 3.17157C16.6569 2 14.7712 2 11 2C7.22876 2 5.34315 2 4.17157 3.17157Z" fill="#e3e3e3"></path></g></svg>',1),jb=[Wb],zb={class:"mb-4 text-center"},$b={class:"font-bold font-manrope text-gray-800 text-2xl bg-yellow-100 inline-block rounded-lg px-3"},qb=["innerHTML"],Ub={__name:"AnswerSection",props:["data"],setup(t){const e=t,n=As({});return Jc(()=>{console.log(e.data),Ih()}),(i,r)=>(Ue(),lt("div",Rb,[e.data&&e.data.length?(Ue(!0),lt(Yr,{key:0},Df(e.data,(s,o)=>(Ue(),lt("div",{"data-aos":"fade-up",key:o,class:"lg:mt-6 mt-2 bg-gray-500 bg-opacity-80 p-6 rounded-lg"},[J("div",Pb,[J("div",{class:"absolute top-0 right-3 cursor-pointer",onClick:a=>n.value[o]=!n.value[o]},[n.value[o]?(Ue(),lt("span",Vb,jb)):(Ue(),lt("span",{key:0,"data-tooltip-target":"tooltip-light_"+o,"data-tooltip-placement":"top"},Hb,8,Fb))],8,Mb),J("p",zb,[J("span",$b,jh(s.key),1)]),J("p",{class:"text-white font-manrope text-lg font-semibold",innerHTML:s.value},null,8,qb)])]))),128)):qf("",!0)]))}},Yb={class:"container mx-auto px-4 sticky top-4 z-10"},Kb={class:"lg:max-w-md mx-auto w-full lg:w-1/2 mt-6"},Gb=J("label",{for:"default-search",class:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white"},"Поиск",-1),Qb={class:"relative"},Xb=J("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[J("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[J("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})])],-1),Jb={__name:"SearchInput",setup(t){const e=As(""),n=As([]);return Pf(e,i=>{i||(n.value=[])}),Rf(()=>{if(!e.value)return;const i=ry(Iy,"/"),r=e.value.charAt(0).toUpperCase()+e.value.slice(1),s=fy(i,hy(),uy(r),ly(r+""));oy(s,o=>{n.value=[],o.forEach(a=>{var l=a.key,c=a.val();n.value.push({key:l,value:c})})},o=>{console.error("Ошибка чтения данных: ",o)})}),(i,r)=>(Ue(),lt(Yr,null,[J("div",Yb,[J("form",Kb,[Gb,J("div",Qb,[Xb,Tf(J("input",{type:"search",id:"default-search","onUpdate:modelValue":r[0]||(r[0]=s=>e.value=s),class:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Найдем ответы...",required:""},null,512),[[Qf,e.value]])])])]),Bt(Ub,{data:n.value},null,8,["data"])],64))}},Zb=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},e0={class:"wrapper"},t0={__name:"App",setup(t){return Jc(()=>{vp.init()}),(e,n)=>(Ue(),lt("div",e0,[Bt(Cp),Bt(Jb)]))}},n0=Zb(t0,[["__scopeId","data-v-fa0cffc1"]]),Sh=Vue.createApp(n0);Sh.use(pp);Sh.mount("#app");
